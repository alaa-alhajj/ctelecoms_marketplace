
tinymce.PluginManager.add("bootstrapaccordion",function(c,b){function a(){function k(){var q="";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var p=0;p<5;p++){q+=o.charAt(Math.floor(Math.random()*o.length))}return q}$makeID=k();var j;var m=c.selection;var e;e=m.getNode();var f=e.innerHTML;TineMceLoadCMS();var n="Bootstrap_TinyMCE_Accordion"+$makeID+"_";var h="FRE";var l='<link rel="stylesheet" href="../../includes/bootstrap/css/bootstrap.min.css" />';l+='<script src="../../includes/plugins/jQuery/configTinymce.js"><\/script>';l+='<script src="../../includes/plugins/jQuery/jQuery-2.1.3.min.js"><\/script>';l+='<script src="../../includes/plugins/fontawesome-iconpicker/dist/js/fontawesome-iconpicker.min.js"><\/script>';l+='<link rel="stylesheet" href="../../includes/plugins/fontawesome-iconpicker/dist/css/fontawesome-iconpicker.min.css" />';l+='<link rel="stylesheet" href="../../includes/font_awesome/css/font-awesome.min.css" />';var i="<button type='button' class='btn btn-danger' id='"+n+"btn1' name='"+n+"btn1'>Add New Accordion</button>";i+="<div id='"+n+"Accordion' style='width:100%;overflow-y:scroll;height:350px;overflow-x:hidden;border:1px solid #ccc' class='form-horizontal'></div>";i=l+i;j=c.windowManager.open({autoScroll:false,width:"900",height:400,top:10,title:"Bootstrap Tabs",spacing:20,padding:10,items:[{type:"container",minWidth:885,minHeight:350,html:i}],buttons:[{text:"Insert",classes:"widget btn primary first abs-layout-item",onclick:function(){var p="";var o=1;$("."+n+"TAccordionDiv ."+n+"AccordionTitle").each(function(){$idV=$(this).data("id");if(o===1){$classActive="";$areaExpend="true";$classIn="in"}else{$classActive="collapsed";$areaExpend="false";$classIn=""}$collapseId=n+o;$collapseHeaderId=n+"Heading"+o;var q=$("#"+n+"ContentAccordion"+$idV+"_ifr").contents().find("body").html();p+="<div class='panel panel-default'>";p+="<div class='panel-heading' role='tab' id='"+$collapseHeaderId+"'>";p+="<h4 class='panel-title'>";p+="<a role='button' class='"+$classActive+"' data-toggle='collapse' data-parent='#"+n+"' href='#"+$collapseId+"' aria-expanded='"+$areaExpend+"' aria-controls='"+$collapseId+"'>";p+=$(this).val();p+="</a>";p+="</h4>";p+="</div>";p+="<div id='"+$collapseId+"' class='panel-collapse collapse "+$classIn+"' role='tabpanel' aria-labelledby='"+$collapseHeaderId+"'>";p+="<div class='panel-body'>";p+=q;p+="</div>";p+="</div>";p+="</div>";o++});m.setContent("");if(p!==undefined&&p!==""){c.insertContent("<div class='mceNonEditable AccordionNoneEditable panel-group' id='accordion' role='tablist' aria-multiselectable='true'>"+p+"</div><br /><br />")}j.close()}},{text:"Close",onclick:function(){j.close()}}]});var g=1;var d=[];if(c.getContent().replace(/(\r\n|\n|\r)/gm,"")!==e.innerHTML.replace(/ data-mce-contenteditable="false"/gi,"").replace(/(\ data-mce-href=".*?\")/gi,"").replace(/<br>/gi,"<br />")){$(e).find("div.panel.panel-default").each(function(o){$index=o+1;$textAccordion=$(this).children("div.panel-heading").text();$headerId=$(this).children("div.panel-heading").attr("id");$contentAccordion=$(e).find('div[aria-labelledby="'+$headerId+'"] .panel-body').html();if($contentAccordion!==undefined){var p="<div class='form-horizontal "+n+"TAccordionDiv' id='"+n+"TAccordionDiv"+g+"' style='margin-top:20px;border-bottom:1px solid #ccc;padding:5px;'  id='"+n+"tab' class='form-group' data-id='"+g+"'>";p+="<div class='form-group'>";p+="<label class='col-xs-2'>Accordion Title</label>";p+="<div class='col-xs-8'><input type='text' value='"+$textAccordion+"' data-id='"+g+"' class='"+n+"AccordionTitle title' id='"+n+"AccordionTitle"+g+"' style='width:100%;height:30px;padding:2px;border:1px solid #ccc' /></div>";p+="<button class='removeAccordionBo btn btn-default' type='button'  data-target='"+n+"TAccordionDiv"+g+"'>x</button></div>";p+="<div class='form-group'>";p+="<label class='col-xs-12'>Accordion Description</label>";p+="<div class='col-xs-12'><textarea  id='"+n+"ContentAccordion"+g+"' class='FullTextEditor' >"+$contentAccordion+"</textarea></div>";p+="</div>";p+="</div>";document.getElementById(n+"Accordion").insertAdjacentHTML("beforeend",p);TineMceLoadCMS();$(".iconpicker").iconpicker();g++}})}TineMceLoadCMS();$(".removeAccordionBo").click(function(){$target=$(this).data("target");$("#"+$target).remove()});document.getElementById(n+"btn1").addEventListener("click",function(){var o="<div id='"+n+"TAccordionDiv"+g+"' class='form-horizontal "+n+"TAccordionDiv' style='margin-top:20px;border-bottom:1px solid #ccc;padding:5px;'  id='"+n+"tab' class='form-group' data-id='"+g+"'>";o+="<div class='form-group'>";o+="<label class='col-xs-2'>Accordion Title</label>";o+="<div class='col-xs-8'><input type='text' data-id='"+g+"' class='"+n+"AccordionTitle title' id='"+n+"AccordionTitle"+g+"'style='width:100%;height:30px;padding:2px;border:1px solid #ccc' /></div>";o+="<button class='removeAccordionBo btn btn-default' type='button'  data-target='"+n+"TAccordionDiv"+g+"'>x</button></div>";o+="<div class='form-group'>";o+="<label class='col-xs-12'>Accordion Description</label>";o+="<div class='col-xs-12'><textarea  id='"+n+"ContentAccordion"+g+"' class='FullTextEditor' ></textarea></div>";o+="</div>";o+="</div>";document.getElementById(n+"Accordion").insertAdjacentHTML("beforeend",o);TineMceLoadCMS();$(".iconpicker").iconpicker();g++})}c.addButton("bootstrapaccordion",{text:"Accordion",tooltip:"Accordion",onclick:a,stateSelector:"div.AccordionNoneEditable"})});