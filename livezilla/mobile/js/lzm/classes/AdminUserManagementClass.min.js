
function AdminUserManagementClass(){this.operators=new LzmOperators();this.groups=new LzmGroups();this.inputList=new LzmCustomInputs();this.defaultLanguage="en";this.availableLanguages={};this.permissions={};this.selectedUser="";this.selectedGroup="";this.selectedListTab="user";this.editType="";this.newGroup=this.createEmptyGroup();this.newUser=this.createEmptyUser();this.loadedUser=null;this.loadedGroup=null;this.newOpPerms="1121202101000210111101111111111111011111011011022";this.newBotPic="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";this.newOpPic="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";this.newPm=[{et:"Hi %external_name%,\r\n\r\nThank you for getting in touch with us. \r\n\r\nWe have received your message and will be responding to your enquiry as soon as possible.\r\n\r\n-------------------------------------------------------------\r\nDate: %localdate%\r\n-------------------------------------------------------------\r\nName: %external_name%\r\nEmail: %external_email%\r\nGroup: %group_description%\r\n-------------------------------------------------------------\r\n%mailtext%\r\n\r\n%ticket_hash%",etr:"%mailtext%\r\n\r\n-------------------------------------------------------------\r\nPrevious Message:\r\n\r\n%quote%\r\n-------------------------------------------------------------\r\n\r\nWould you like to give feedback?\r\n%feedback_link%",ect:"Hi %external_name%,\r\n\r\nThank you for chatting with us. Please find your chat transcript below.\r\n\r\n%website_name% / %group_description%\r\n\r\nDate: %localdate%\r\n-------------------------------------------------------------\r\nName: %external_name%\r\nEmail: %external_email%\r\n\r\nChat reference number: %chat_id%\r\n-------------------------------------------------------------\r\n%transcript%\r\n-------------------------------------------------------------\r\n\r\nWould you like to give feedback?\r\n%feedback_link%",ti:"",ci:"",st:"%ticket_hash% %website_name% - Your message",str:"%ticket_hash% %website_name% - Your message",sct:"%website_name% - Chat Transcript",ccmbi:"",lang:"EN",invm:"Hello, my name is %operator_name%.<br><br>Do you need help?<br><br>Start Live-Chat now to get assistance.",inva:"Hello, my name is %operator_name%.<br><br>Do you need help?<br><br>Start Live-Chat now to get assistance.",wel:"Hello %external_name%, my name is %operator_name%, how may I help you?",welcmb:"Hello, my name is %operator_name%. Please expect my telephone call in the next few seconds. During our telephone conversation, feel free to pass me information and files through this chat.",wpa:"Website Operator %operator_name% would like to redirect you to this URL:\r\n\r\n%target_url%",wpm:"Website Operator %operator_name% would like to redirect you to this URL:\r\n\r\n%target_url%",bi:"1",def:"1",aw:"1",edit:"1",qm:"",qmt:"120",hct:"",ht:"",htr:"",shortlang:"EN"},{et:"Guten Tag %external_name%,\r\n\r\nvielen Dank für Ihre Anfrage. \r\n\r\nWir haben Ihre Nachricht erhalten und werden uns in Kürze mit Ihnen in Verbindung setzen.\r\n\r\n-------------------------------------------------------------\r\nDatum: %localdate%\r\n-------------------------------------------------------------\r\nName: %external_name%\r\nE-Mail: %external_email%\r\nGruppe: %group_description%\r\n-------------------------------------------------------------\r\n%mailtext%\r\n\r\n%ticket_hash%",etr:"%mailtext%\r\n\r\n-------------------------------------------------------------\r\nVorherige Nachricht:\r\n\r\n%quote%\r\n-------------------------------------------------------------\r\n\r\nSind Sie zufrieden? Bewerten Sie uns:\r\n%feedback_link%",ect:"Guten Tag %external_name%,\r\n\r\nvielen Dank für unser Gespräch per Chat. Eine Mitschrift erhalten Sie mit dieser E-Mail.\r\n\r\n%website_name% / %group_description%\r\n\r\nDatum: %localdate%\r\n-------------------------------------------------------------\r\nName: %external_name%\r\nE-Mail: %external_email%\r\n\r\nChat Referenz-Code: %chat_id%\r\n-------------------------------------------------------------\r\n%transcript%\r\n-------------------------------------------------------------\r\n\r\nSind Sie zufrieden? Bewerten Sie uns:\r\n%feedback_link%",ti:"",ci:"",st:"%ticket_hash% %website_name% - Ihre Nachricht",str:"%ticket_hash% %website_name% - Ihre Nachricht",sct:"%website_name% - Mitschrift Ihres Chats",ccmbi:"",lang:"DE",invm:"Guten Tag, mein Name ist %operator_name%. Benötigen Sie Hilfe? Gerne berate ich Sie in einem Live-Chat.",inva:"Guten Tag, mein Name ist %operator_name%. Benötigen Sie Hilfe? Gerne berate ich Sie in einem Live-Chat.",wel:"Guten Tag %external_name%, mein Name ist %operator_name%. Wie kann ich Ihnen helfen?",welcmb:"Guten Tag, meine Name ist %operator_name%. Sie werden in den nächsten Sekunden einen Anruf von mir erhalten. Während unseres Telefonats können Sie mir bei Bedarf Informationen und Dateien auch über diesen Chat zukommen lassen.",wpa:"Ein Betreuer dieser Webseite (%operator_name%) möchte Sie auf einen anderen Bereich weiterleiten:\r\n\r\n%target_url%",wpm:"Ein Betreuer dieser Webseite (%operator_name%) möchte Sie auf einen anderen Bereich weiterleiten:\r\n\r\n%target_url%",bi:"1",def:"",aw:"1",edit:"1",qm:"",qmt:"120",hct:"",ht:"",htr:"",shortlang:"DE"}];this.selectedSignatureNo=-1;this.selectedTextEmailsNo=-1;this.selectedGroupTitleLang="";this.selectedSocialMediaNo=-1;this.selectedOpeningHoursNo=-1;this.contextMenuIsVisible=false;this.createButtonMenuIsVisible=false;this.dialogTitle="";this.storedSuperMenu=null}AdminUserManagementClass.prototype.createListView=function(d,f,e){var g=this;var c=(e=="user")?0:1;g.selectedListTab=e;g.selectedUser=d;g.selectedGroup=f;var h=((e=="user"&&g.selectedUser!="")||(e=="group"&&g.selectedGroup!=""))?"":"ui-disabled";var b=lzm_inputControls.createButton("umg-new-btn","","showCreateButtonMenu(event)",t("New"),'<i class="fa fa-plus"></i>',"lr",{},t("Create new operator"),"a")+lzm_inputControls.createButton("umg-edit-btn",h,"editListObject(null)",t("Edit"),'<i class="fa fa-edit"></i>',"lr",{"margin-left":"4px"},t("Edit the selected operator"),"a")+lzm_inputControls.createButton("umg-rm-btn",h,"removeListObject(null)",t("Remove"),'<i class="fa fa-remove"></i>',"lr",{"margin-left":"4px"},t("Remove the selected operator"),"a");$("#umg-control-panel").html(b);var a=[{name:t("Operators"),content:g.createOperatorList()},{name:t("Groups"),content:g.createGroupList()}];lzm_inputControls.createTabControl("umg-list-placeholder",a,c,0);lzm_layout.resizeUserManagement();$("#umg-list-placeholder-tab-0").click(function(){removeUmgContextMenu();if(g.selectedUser==""){$("#umg-edit-btn").addClass("ui-disabled");$("#umg-rm-btn").addClass("ui-disabled")}else{$("#umg-edit-btn").removeClass("ui-disabled");$("#umg-rm-btn").removeClass("ui-disabled")}g.selectedListTab="user"});$("#umg-list-placeholder-tab-1").click(function(){removeUmgContextMenu();if(g.selectedGroup==""){$("#umg-edit-btn").addClass("ui-disabled");$("#umg-rm-btn").addClass("ui-disabled")}else{$("#umg-edit-btn").removeClass("ui-disabled");$("#umg-rm-btn").removeClass("ui-disabled")}g.selectedListTab="group"})};AdminUserManagementClass.prototype.createOperatorList=function(){var l=this;var f=this.operators.getOperatorList("userid","",true);var k='<div id="operator-list-fieldset"><table class="visitor-list-table alternating-rows-table lzm-unselectable" id="operator-list" style="width: 100%;"><thead><tr><th class="icon-column"></th><th>'+t("Username")+"</th><th>"+t("Fullname")+"</th><th>"+t("Groups")+"</th><th>"+t("Type")+"</th><th>"+t("Description")+"</th></tr></thead><tbody>";for(var h=0;h<f.length;h++){var d=(f[h].level==1)?t("Administrator"):t("User");var g=(f[h].desc.length>50)?f[h].desc.substr(0,47)+"...":f[h].desc;var a=(l.selectedUser==f[h].id)?" selected-table-line":"";var c=[];var b=l.groups.getGroupList("",false,false);for(var e=0;e<b.length;e++){if($.inArray(b[e].id,f[h].groups)!=-1){c.push(b[e].id)}}k+='<tr class="operator-list-line lzm-unselectable'+a+'" id="operator-list-line-'+f[h].id+'" onclick="selectTableLine(\''+f[h].id+"');\" ondblclick=\"editListObject('"+f[h].id+"');\" oncontextmenu=\"showUmgContextMenu('"+f[h].id+'\', event);"><td style="text-align:center;"><i class="fa fa-user"></i></td><td>'+f[h].userid+"</td><td>"+f[h].name+"</td><td>"+c.join(", ")+"</td><td>"+d+"</td><td>"+g+"</td></tr>"}k+="</tbody></table></div>";return k};AdminUserManagementClass.prototype.createGroupList=function(){var l=this;var h=this.operators.getOperatorList("","",true);var m={},k=0;for(k=0;k<h.length;k++){for(var f=0;f<h[k].groups.length;f++){if(typeof m[h[k].groups[f]]=="undefined"){m[h[k].groups[f]]=1}else{m[h[k].groups[f]]+=1}}}var d=this.groups.getGroupList("id",true,false);var a='<div id="group-list-fieldset"><table class="visitor-list-table alternating-rows-table lzm-unselectable" id="operator-list" style="width: 100%;"><thead><tr><th class="icon-column"></th><th>'+t("Group Name")+"</th><th>"+t("Members")+"</th><th>"+t("Default")+"</th><th>"+t("Email")+"</th><th>"+t("Description")+"</th></tr></thead><tbody>";for(k=0;k<d.length;k++){var g=(typeof m[d[k].id]!="undefined")?m[d[k].id]:0;var e=(d[k].standard==1)?t("Yes"):t("No");var n="";for(var c in d[k].humanReadableDescription){if(d[k].humanReadableDescription.hasOwnProperty(c)){n+="["+c.toUpperCase()+"] => "+d[k].humanReadableDescription[c]+", "}}n=n.replace(/, $/,"");n=(n.length>50)?n.substr(0,47)+"...":n;var b=(l.selectedGroup==d[k].id)?" selected-table-line":"";a+='<tr class="group-list-line lzm-unselectable'+b+'" id="group-list-line-'+d[k].id+'" onclick="selectTableLine(\''+d[k].id+"');\" ondblclick=\"editListObject('"+d[k].id+"');\" oncontextmenu=\"showUmgContextMenu('"+d[k].id+'\', event);"><td style="text-align:center;"><i class="fa fa-users"></i></td><td>'+d[k].id+"</td><td>"+g+"</td><td>"+e+"</td><td>"+d[k].email+"</td><td>"+n+"</td></tr>"}a+="</tbody></table></div>";return a};AdminUserManagementClass.prototype.createBotConfiguration=function(d){var c=this,b="";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="bot";c.editType="bot";$(".umg-views").css({display:"none"});$("#umg-edit-view").css({display:"block"});if(d==null){b=window.parent.setUserManagementTitle(t("New Operator"))}else{b=window.parent.setUserManagementTitle(d.name)}if(window.parent.lzm_chatDisplay.settingsDisplay.userManagementDialogTitle==""){window.parent.lzm_chatDisplay.settingsDisplay.userManagementDialogTitle=b}if(d!=null){c.loadedUser=lzm_commonTools.clone(d)}var a=[{name:t("Account"),content:c.createAccountConfiguration(d,"bot"),hash:"account"},{name:t("Groups"),content:c.createGroupsConfiguration(d,"bot"),hash:"groups"},{name:t("Picture"),content:c.createPictureConfiguration(d,true),hash:"picture"},{name:t("Bot Mode"),content:c.createBotModeConfiguration(d),hash:"bot-mode"}];lzm_inputControls.createTabControl("umg-edit-placeholder",a,0,0);c.fillCanvasAndResize();lzm_layout.resizeEditUserConfiguration();$("#operator-pic-icon").click(function(){$("#operator-pic").val("");$("#operator-pic-b64").val("DEFAULT");c.fillCanvasAndResize()});$(".bot-mode-radio").change(function(){if($("#operator-bot-mode-wmm").prop("checked")){$("#wmm-subconfig").removeClass("ui-disabled");$("#om-explanation").addClass("ui-disabled")}else{$("#wmm-subconfig").addClass("ui-disabled");$("#om-explanation").removeClass("ui-disabled")}});$("#wmm-fwd-after").change(function(){$("#wmm-fwd-after-inner-text").html($("#wmm-fwd-after option:selected").text())});$("#operator-pic").change(function(h){var g=h.target;var f=new FileReader();f.onload=function(){var e=f.result;$("#operator-pic-b64").val(e);c.fillCanvasAndResize()};f.readAsDataURL(g.files[0])});$("#operator-pic-img").click(function(){$("#operator-pic").click()})};AdminUserManagementClass.prototype.createOperatorConfiguration=function(b){var d=this,c="";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="operator";d.editType="operator";$(".umg-views").css({display:"none"});$("#umg-edit-view").css({display:"block"});if(b==null||typeof b.is_copy!="undefined"){c=window.parent.setUserManagementTitle(t("New Operator"));if(b==null){d.permissions=lzm_commonPermissions.getUserPermissions(false,"",d.newOpPerms)}else{d.permissions=lzm_commonPermissions.getUserPermissions(false,"",b.perms)}}else{c=window.parent.setUserManagementTitle(b.name);d.permissions=lzm_commonPermissions.getUserPermissions(false,"",b.perms)}if(window.parent.lzm_chatDisplay.settingsDisplay.userManagementDialogTitle==""){window.parent.lzm_chatDisplay.settingsDisplay.userManagementDialogTitle=c}if(b!=null){d.loadedUser=lzm_commonTools.clone(b)}var f={chats:{general:[{value:"2",text:t("Operator can see all chats")},{value:"1",text:t("Operator can see chats of his group")},{value:"0",text:t("Operator can see his own chats")}]},tickets:{general:[{value:"2",text:t("Operator can see and review all tickets")},{value:"1",text:t("Operator can see and review tickets addressed to one of his groups")},{value:"0",text:t("Operator can't see or review any tickets")}]},ratings:{general:[{value:"2",text:t("Operator can see all ratings")},{value:"1",text:t("Operator can see ratings referring to him")},{value:"0",text:t("Operator can't see any ratings")}]},profiles:{general:[{value:"2",text:t("Operator can edit all profiles and visitcards")},{value:"1",text:t("Operator can edit his own profile / visitcard")},{value:"0",text:t("Operator can't edit profiles / visitcards")}]},resourcesrw:{general:[{value:"3",text:tid("all_entries")},{value:"2",text:tid("group_entries")},{value:"1",text:tid("own_entries")},{value:"0",text:tid("none")}]},events:{general:[{value:"2",text:t("Operator can edit all events")},{value:"1",text:t("Operator can edit his own events")},{value:"0",text:t("Operator can't edit events")}]},reports:{general:[{value:"2",text:t("Operator can download and update (incl. recalculation) reports")},{value:"1",text:t("Operator can download reports")},{value:"0",text:t("Operator can't download reports")}]},archives:{external:[{value:"2",text:t("Operator can see all archived chats")},{value:"1",text:t("Operator can see archived chats of his groups")},{value:"0",text:t("Operator can only see his own archived chats")}],internal:[{value:"2",text:t("Operator can see archived chats of all operators and groups")},{value:"1",text:t("Operator can only see his own archived chats")}]},monitoring:{general:[{value:"2",text:t("Operator can see all visitors on website")},{value:"1",text:t("Operator can see visitors he is chatting with")}]},groups:{general:[{value:"2",text:t("Operator can perform actions on all Dynamic Groups")},{value:"1",text:t("Operator can perform actions on his own Dynamic Groups")},{value:"0",text:t("Operator can't perform actions on any Dynamic Groups")}]},replies:{general:[{value:"2",text:t("Operator can configure auto replies of all operators/bots/groups")},{value:"1",text:t("Operator can configure auto replies of his groups and of all operators/bots within his groups")},{value:"0",text:t("Operator can't configure auto replies")}]}};var e=d.createOperatorPermissionsConfiguration(b,f);var a=[{name:t("Account"),content:d.createAccountConfiguration(b,"operator"),hash:"account"},{name:t("Groups"),content:d.createGroupsConfiguration(b,"operator"),hash:"groups"},{name:t("Chats"),content:d.createOperatorChatsConfiguration(b),hash:"chats"},{name:t("Permissions"),content:e.html,hash:"permissions"},{name:t("Security"),content:d.createOperatorSecurityConfiguration(b),hash:"security"},{name:t("Picture"),content:d.createPictureConfiguration(b,false),hash:"picture"},{name:t("Signatures"),content:d.createSignatureConfiguration(b),hash:"signatures"},{name:t("Mobile Account"),content:d.createOperatorMobileAccountConfiguration(b),hash:"mobile-account"}];lzm_inputControls.createTabControl("umg-edit-placeholder",a,0,0);lzm_inputControls.createTabControl("permissions-placeholder",e.tabs,0,$("#umg-edit-view").width()-44);d.fillCanvasAndResize();lzm_layout.resizeEditUserConfiguration();$("#operator-pic-icon").click(function(){$("#operator-pic").val("");$("#operator-pic-b64").val("DEFAULT");d.fillCanvasAndResize()});$("#operator-limit-chats").change(function(){if($("#operator-limit-chats").prop("checked")){$("#op-limit-chats-subconfig").removeClass("ui-disabled")}else{$("#op-limit-chats-subconfig").addClass("ui-disabled")}});$("#op-limit-action").change(function(){$("#op-limit-action-inner-text").html($("#op-limit-action option:selected").text())});$("#operator-chat-number").change(function(){var g=parseInt($("#operator-chat-number").val());if(isNaN(g)||g<=0){g=1}else{if(g>=9){g=9}}$("#operator-chat-number").val(g.toString())});$("#operator-account-is-mobile").change(function(){if($("#operator-account-is-mobile").prop("checked")){$("#mobile-account-subconfig").removeClass("ui-disabled")}else{$("#mobile-account-subconfig").addClass("ui-disabled")}});$("#operator-lng").change(function(){$("#operator-lng-inner-text").html($("#operator-lng option:selected").text())});lzm_inputControls.createSelectChangeHandler("permtab-chats-select-general",f.chats.general);lzm_inputControls.createSelectChangeHandler("permtab-tickets-select-general",f.tickets.general);lzm_inputControls.createSelectChangeHandler("permtab-ratings-select-general",f.ratings.general);lzm_inputControls.createSelectChangeHandler("permtab-profiles-select-general",f.profiles.general);lzm_inputControls.createSelectChangeHandler("permtab-events-select-general",f.events.general);lzm_inputControls.createSelectChangeHandler("permtab-reports-select-general",f.reports.general);lzm_inputControls.createSelectChangeHandler("permtab-archives-select-external",f.archives.external);lzm_inputControls.createSelectChangeHandler("permtab-archives-select-internal",f.archives.internal);lzm_inputControls.createSelectChangeHandler("permtab-monitoring-select-general",f.monitoring.general);lzm_inputControls.createSelectChangeHandler("permtab-groups-select-general",f.groups.general);lzm_inputControls.createSelectChangeHandler("permtab-replies-select-general",f.replies.general);$("#operator-pic-img").click(function(){$("#operator-pic").click()});$("#permtab-chats-checkbox-join").change(function(){if($("#permtab-chats-checkbox-join").prop("checked")){$("#permtab-chats-checkbox-join-invisible").parent().removeClass("ui-disabled");$("#permtab-chats-checkbox-join-after-invitation").parent().removeClass("ui-disabled")}else{$("#permtab-chats-checkbox-join-invisible").parent().addClass("ui-disabled");$("#permtab-chats-checkbox-join-invisible").prop("checked",false);$("#permtab-chats-checkbox-join-after-invitation").parent().addClass("ui-disabled");$("#permtab-chats-checkbox-join-after-invitation").prop("checked",false)}});$("#permtab-chats-checkbox-join-invisible").change(function(){if($("#permtab-chats-checkbox-join-invisible").prop("checked")){$("#permtab-chats-checkbox-join-after-invitation").prop("checked",false)}});$("#permtab-chats-checkbox-join-after-invitation").change(function(){if($("#permtab-chats-checkbox-join-after-invitation").prop("checked")){$("#permtab-chats-checkbox-join-invisible").prop("checked",false)}});$("#permtab-chats-checkbox-cancel-invites").change(function(){if($("#permtab-chats-checkbox-cancel-invites").prop("checked")){$("#permtab-chats-checkbox-cancel-invites-others").parent().removeClass("ui-disabled")}else{$("#permtab-chats-checkbox-cancel-invites-others").parent().addClass("ui-disabled");$("#permtab-chats-checkbox-cancel-invites-others").prop("checked",false)}});$("#permtab-chats-checkbox-can-auto-accept").change(function(){if($("#permtab-chats-checkbox-can-auto-accept").prop("checked")){$("#permtab-chats-checkbox-must-auto-accept").parent().removeClass("ui-disabled")}else{$("#permtab-chats-checkbox-must-auto-accept").parent().addClass("ui-disabled");$("#permtab-chats-checkbox-must-auto-accept").prop("checked",false)}});$("#permtab-tickets-checkbox-review-emails").change(function(){if($("#permtab-tickets-checkbox-review-emails").prop("checked")){$("#permtab-tickets-checkbox-delete-emails").parent().removeClass("ui-disabled")}else{$("#permtab-tickets-checkbox-delete-emails").parent().addClass("ui-disabled");$("#permtab-tickets-checkbox-delete-emails").prop("checked",false)}});$("#permtab-tickets-checkbox-change-status").change(function(){if($("#permtab-tickets-checkbox-change-status").prop("checked")){$("#permtab-tickets-checkbox-status-open").parent().removeClass("ui-disabled");$("#permtab-tickets-checkbox-status-progress").parent().removeClass("ui-disabled");$("#permtab-tickets-checkbox-status-deleted").parent().removeClass("ui-disabled");$("#permtab-tickets-checkbox-status-closed").parent().removeClass("ui-disabled")}else{$("#permtab-tickets-checkbox-status-open").parent().addClass("ui-disabled");$("#permtab-tickets-checkbox-status-open").prop("checked",false);$("#permtab-tickets-checkbox-status-progress").parent().addClass("ui-disabled");$("#permtab-tickets-checkbox-status-progress").prop("checked",false);$("#permtab-tickets-checkbox-status-deleted").parent().addClass("ui-disabled");$("#permtab-tickets-checkbox-status-deleted").prop("checked",false);$("#permtab-tickets-checkbox-status-closed").parent().addClass("ui-disabled");$("#permtab-tickets-checkbox-status-closed").prop("checked",false)}});$("#permtab-files-can-upload").change(function(){if($("#permtab-files-can-upload").prop("checked")){$("#permtab-files-size-container").removeClass("ui-disabled")}else{$("#permtab-files-size-container").addClass("ui-disabled");$("#permtab-files-size").val("0")}});$("#operator-pic").change(function(k){var h=k.target;var g=new FileReader();g.onload=function(){var l=g.result;$("#operator-pic-b64").val(l);d.fillCanvasAndResize()};g.readAsDataURL(h.files[0])});$("#operator-auth").change(function(){if($("#operator-auth").prop("selectedIndex")==1){$("#op-account-password").addClass("ui-invisible")}else{$("#op-account-password").removeClass("ui-invisible")}});$("#operator-auth").change()};AdminUserManagementClass.prototype.fillCanvasAndResize=function(){var g=$("#operator-pic-canvas")[0],a=g.getContext("2d"),e="";var b=new Image();b.onload=function(){try{a.clearRect(0,0,80,60);a.drawImage(this,0,0,80,60);a.drawImage(g,0,0,80,60,0,0,80,60);e=g.toDataURL();$("#operator-pic-img").attr("src",e);e=(f=="DEFAULT")?f:e;$("#operator-pic-b64").val(e)}catch(c){}};var f=$("#operator-pic-b64").val(),d;if(f=="DEFAULT"){d="../images/avatar.png"}else{d=f}b.src=d};AdminUserManagementClass.prototype.createGroupConfiguration=function(e){var c=this,b="";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="group";c.editType="group";$(".umg-views").css({display:"none"});$("#umg-edit-view").css({display:"block"});if(e==null){b=window.parent.setUserManagementTitle(t("New Group"))}else{b=window.parent.setUserManagementTitle(e.name+" ("+e.id+")")}if(window.parent.lzm_chatDisplay.settingsDisplay.userManagementDialogTitle==""){window.parent.lzm_chatDisplay.settingsDisplay.userManagementDialogTitle=b}if(e!=null){c.loadedGroup=lzm_commonTools.clone(e)}var f=c.createGroupInputFieldConfiguration(e);var d=c.createGroupTicketsConfiguration(e);var a=[{name:t("Details"),content:c.createGroupDetailsConfiguration(e),hash:"details"},{name:t("Chats"),content:c.createGroupChatsConfiguration(e),hash:"chats"},{name:t("Text and Emails"),content:c.createTextAndEmailsConfiguration(e),hash:"text-and-emails"},{name:t("Input Fields"),content:f.html,hash:"input-fields"},{name:t("Tickets"),content:d.html,hash:"tickets"},{name:t("Opening Hours"),content:c.createGroupHoursConfiguration(e),hash:"opening-hours"},{name:t("Signatures"),content:c.createSignatureConfiguration(e),hash:"signatures"}];lzm_inputControls.createTabControl("umg-edit-placeholder",a,0,0);lzm_inputControls.createTabControl("gr-input-fields-placeholder",f.tabs,0,$(window).width()-145);lzm_inputControls.createTabControl("gr-tickets-placeholder",d.tabs,0,$(window).width()-145);$("#gr-limit-chat-amount").change(function(){if($("#gr-limit-chat-amount").prop("checked")){$("#gr-limit-amount-inner").removeClass("ui-disabled")}else{$("#gr-limit-amount-inner").addClass("ui-disabled")}});$("#gr-limit-action").change(function(){$("#gr-limit-action-inner-text").html($("#gr-limit-action option:selected").text())});$("#gr-limit-amount-to").change(function(){var g=parseInt($("#gr-limit-amount-to").val());if(isNaN(g)||g<=0){g=1}else{if(g>=9){g=9}}$("#gr-limit-amount-to").val(g.toString())});$(".operator-priority-input").change(function(){var g=parseInt($(this).val());if(isNaN(g)||g<1){g=1}else{if(g>10){g=10}}$(this).val(g)});$(".gr-input-field-select").find("select.lzm-select-select-a").change(function(){var g=$(this).attr("id");var h=$(this).children("option:selected").text();$("#"+g+"-inner-text").html(h)});$(".gr-ticket-assign-select").find("select.lzm-select-select-a").change(function(){var g=$(this).attr("id");var h=$(this).children("option:selected").text();$("#"+g+"-inner-text").html(h)});$("#gr-ticket-auto-assign").change(function(){if($("#gr-ticket-auto-assign").prop("checked")){$("#gr-ticket-assign-list-div").removeClass("ui-disabled")}else{$("#gr-ticket-assign-list-div").addClass("ui-disabled")}});$("#gr-ticket-in-action").change(function(){$("#gr-ticket-in-action-inner-text").html($("#gr-ticket-in-action option:selected").text())});$("#gr-transcript-email").change(function(){$("#gr-transcript-email-inner-text").html($("#gr-transcript-email option:selected").text())});$("#gr-tickets-out-mb").change(function(){$("#gr-tickets-out-mb-inner-text").html($("#gr-tickets-out-mb option:selected").text())});$("#tae-auto-send-wel").change(function(){if($("#tae-auto-send-wel").prop("checked")){$("#tae-wel-edit").parent().removeClass("ui-disabled")}else{$("#tae-wel-edit").parent().addClass("ui-disabled");$("#tae-wel-edit").prop("checked",false)}});lzm_layout.resizeEditUserConfiguration()};AdminUserManagementClass.prototype.hideEditDialog=function(){$(".umg-views").css({display:"none"});$("#umg-list-view").css({display:"block"});this.loadedUser=null;this.loadedGroup=null;this.createListView(this.selectedUser,this.selectedGroup,this.selectedListTab)};AdminUserManagementClass.prototype.saveUserOrGroup=function(){if(this.selectedListTab=="user"){if(this.editType=="bot"){this.saveBot()}else{this.saveUser()}}else{this.saveGroup()}};AdminUserManagementClass.prototype.saveUser=function(){var b=this.operators.getOperator(this.selectedUser);var e=this.groups.getGroupList("",true,false),h=0;b=(b!=null)?b:lzm_commonTools.clone(this.newUser);var l=this.createUserId();b.id=(this.selectedUser==""||typeof b.is_copy!="undefined")?l:b.id;b.userid=(this.selectedUser==""||typeof b.is_copy!="undefined")?$("#operator-uid").val():b.userid;b.userid=b.userid.replace(/^ +/,"").replace(/ +$/,"");b.name=$("#operator-fn").val();b.email=$("#operator-em").val();b.desc=$("#operator-desc").val();b.ldap=$("#operator-auth").val();b.lang=$("#operator-lng").val().toUpperCase();b.is_active=($("#operator-inactive").prop("checked"))?false:true;b.passwd=$("#operator-pwd").val();b.passwd_repeat=$("#operator-repeat-pwd").val();if(b.passwd==""){b.passwd=b.passwd_repeat=md5(""+Math.random())}b.passwd_change=$("#operator-force-pwd-change").prop("checked");var k=[],d=[];for(h=0;h<e.length;h++){var p=lz_global_base64_url_encode(e[h].id);if($("#group-member-"+p).prop("checked")){k.push(e[h].id)}if($("#group-hidden-"+p).prop("checked")){d.push(e[h].id)}}b.groups=k;b.groupsHidden=d;var a=parseInt($("#operator-chat-number").val());var n=$("#op-limit-action").val();var g=-1;if($("#operator-limit-chats").prop("checked")&&!isNaN(a)){if(n==1){g=30+a}else{g=a}}b.mc=g;b.level=($("#permtab-general-is-server-admin").prop("checked")||b.userid==lzm_pollServer.loginData.login)?"1":"0";var c=[];for(h=0;h<47;h++){c.push("0")}c[0]=$("#permtab-tickets-select-general").val();c[1]=$("#permtab-ratings-select-general").val();c[2]=$("#permtab-archives-select-external").val();c[3]=0;c[4]=$("#permtab-events-select-general").val();c[6]=$("#permtab-monitoring-select-general").val();c[5]=$("#permtab-reports-select-general").val();c[7]=$("#permtab-chats-checkbox-join").prop("checked")?"1":"0";c[8]=$("#permtab-chats-checkbox-join-invisible").prop("checked")?"1":"0";c[9]=$("#permtab-chats-checkbox-take-over").prop("checked")?"1":"0";c[10]=$("#permtab-chats-checkbox-change-priority").prop("checked")?"1":"0";c[11]=$("#permtab-chats-checkbox-change-target-group").prop("checked")?"1":"0";c[12]=$("#permtab-chats-checkbox-change-target-operator").prop("checked")?"1":"0";c[13]=$("#permtab-chats-select-general").val();c[14]=$("#permtab-chats-checkbox-send-invites").prop("checked")?"1":"0";c[15]=$("#permtab-chats-checkbox-delete-text").prop("checked")?"1":"0";c[16]=$("#permtab-chats-checkbox-forward").prop("checked")?"1":"0";c[17]=$("#permtab-chats-checkbox-join-after-invitation").prop("checked")?"1":"0";c[18]=$("#permtab-groups-select-general").val();c[19]=$("#permtab-chats-checkbox-create-filter").prop("checked")?"1":"0";c[20]=$("#permtab-replies-select-general").val();c[21]=$("#operator-allowed-change-pic").prop("checked")?"1":"0";c[22]=$("#permtab-tickets-checkbox-review-emails").prop("checked")?"1":"0";c[23]=$("#permtab-tickets-checkbox-create-new").prop("checked")?"1":"0";c[24]=$("#permtab-tickets-checkbox-change-signature").prop("checked")?"1":"0";c[25]=$("#permtab-tickets-checkbox-delete-emails").prop("checked")?"1":"0";c[26]=$("#permtab-tickets-checkbox-change-status").prop("checked")?"1":"0";c[27]=$("#permtab-tickets-checkbox-status-open").prop("checked")?"1":"0";c[28]=$("#permtab-tickets-checkbox-status-progress").prop("checked")?"1":"0";c[29]=$("#permtab-tickets-checkbox-status-closed").prop("checked")?"1":"0";c[30]=$("#permtab-tickets-checkbox-assign-operator").prop("checked")?"1":"0";c[31]=$("#permtab-tickets-checkbox-assign-group").prop("checked")?"1":"0";c[34]=$("#permtab-tickets-checkbox-delete-ticket").prop("checked")?"1":"0";c[35]=$("#permtab-profiles-select-general").val();c[36]=$("#permtab-archives-select-internal").val();c[37]=$("#permtab-tickets-checkbox-status-deleted").prop("checked")?"1":"0";c[38]=$("#permtab-chats-checkbox-start-new").prop("checked")?"1":"0";c[39]=$("#permtab-chats-checkbox-cancel-invites").prop("checked")?"1":"0";c[40]=$("#permtab-chats-checkbox-cancel-invites-others").prop("checked")?"1":"0";c[41]=$("#permtab-tickets-checkbox-edit-messages").prop("checked")?"1":"0";c[42]=$("#permtab-chats-checkbox-can-auto-accept").prop("checked")?"1":"0";c[43]=$("#permtab-chats-checkbox-must-auto-accept").prop("checked")?"1":"0";c[44]=$("#permtab-chats-checkbox-can-reject").prop("checked")?"1":"0";c[45]=$("#permtab-general-use-mobile").prop("checked")?"1":"0";c[46]=$("#permtab-general-use-api").prop("checked")?"1":"0";c[47]=$("#permtab-resources-select-general-read").val();c[48]=$("#permtab-resources-select-general-write").val();b.perms=c.join("");var f=parseInt($("#permtab-files-size").val());if(!($("#permtab-files-can-upload").prop("checked"))||isNaN(f)){f=0}b.websp=f;b.lipr=$("#operator-ip-range").val();var o=$("#operator-pic-b64").val();b.pp=(o!=""||typeof b.pp=="undefined")?o:b.pp;b.mobileAccount=$("#operator-account-is-mobile").prop("checked");var m=[];$(".op-pref-account").each(function(){if($(this).prop("checked")){m.push($(this).data("op-id"))}});b.mobileAlternatives=m;delete b.is_copy;this.validateConfigForm("user",b)};AdminUserManagementClass.prototype.saveBot=function(){var c=this.operators.getOperator(this.selectedUser);var a=this.groups.getGroupList("",true,false),e=0;c=(c!=null)?c:lzm_commonTools.clone(this.newUser);var b=this.createUserId();c.id=(this.selectedUser==""||typeof c.is_copy!="undefined")?b:c.id;c.userid=(this.selectedUser==""||typeof c.is_copy!="undefined")?$("#operator-uid").val():c.userid;c.name=$("#operator-fn").val();c.email=$("#operator-em").val();c.desc=$("#operator-desc").val();c.lang=$("#operator-lng").val().toUpperCase();c.is_active=($("#operator-inactive").prop("checked"))?false:true;c.isbot="1";var h=[],d=[];for(e=0;e<a.length;e++){var f=lz_global_base64_url_encode(a[e].id);if($("#group-member-"+f).prop("checked")){h.push(a[e].id)}if($("#group-hidden-"+f).prop("checked")){d.push(a[e].id)}}c.groups=h;c.groupsHidden=d;var g=$("#operator-pic-b64").val();c.pp=(g!=""||typeof c.pp=="undefined")?g:c.pp;c.wm=($("#operator-bot-mode-wmm").prop("checked"))?"1":"0";c.wmohca=$("#wmm-fwd-after").val();this.validateConfigForm("bot",c)};AdminUserManagementClass.prototype.createUserId=function(){var d="",b=0;var a=this.operators.getOperatorList("","",true);while(d==""&&b<1000){d=md5(Math.random().toString()).substr(0,15);for(var c=0;c<a.length;c++){if(a[c].id==d){d=""}}b++}return d};AdminUserManagementClass.prototype.saveGroup=function(){var h=this.groups.getGroup(this.selectedGroup);h=(h!=null)?h:lzm_commonTools.clone(this.newGroup);h.id=(this.selectedGroup=="")?$("#group-id").val():h.id;h.id=h.id.replace(/^ +/,"").replace(/ +$/,"");h.email=$("#group-email").val();h.standard=($("#group-is-default").prop("checked"))?"1":"";h.external=($("#group-interactions-visitors").prop("checked"))?"1":"";h.internal=($("#group-interactions-operators").prop("checked"))?"1":"";var f=$("#gr-limit-action").val();var r=parseInt($("#gr-limit-amount-to").val());r=($("#gr-limit-chat-amount").prop("checked")&&!isNaN(r)&&r>0)?(f=="1")?r+30:r%10:-1;h.mc=r;h.ceo=$("#gr-transcript-email").val();h.ps=$("#gr-op-prio-active").prop("checked")?"1":"0";var g={key:"c_prio",text:"",values:[]};$(".operator-priority-input input").each(function(){var v=parseInt($(this).val());v=(!isNaN(v)&&v>=1&&v<=10)?v-1:0;g.values.push({key:$(this).data("op-id"),text:v});g.text+=v.toString()});var d=this.inputList.getCustomInputList("full",true);var u={key:"ci_hidden",text:"",values:[]};var n={key:"ci_masked",text:"",values:[]};var c={key:"ci_mandatory",text:"",values:[]};var e={key:"ci_cap",text:"",values:[]};var o={key:"ti_hidden",text:"",values:[]};var p={key:"ti_masked",text:"",values:[]};var a={key:"ti_mandatory",text:"",values:[]};var m={key:"ti_cap",text:"",values:[]};for(var s=0;s<d.length;s++){if($("#gr-ift-hidden-chat-"+d[s].id).prop("checked")){u.values.push({text:d[s].id});u.text+=d[s].id}if($("#gr-ift-hidden-ticket-"+d[s].id).prop("checked")){o.values.push({text:d[s].id});o.text+=d[s].id}if($("#gr-ift-mandatory-chat-"+d[s].id).prop("checked")){c.values.push({text:d[s].id});c.text+=d[s].id}if($("#gr-ift-mandatory-ticket-"+d[s].id).prop("checked")){a.values.push({text:d[s].id});a.text+=d[s].id}if($("#gr-ift-cap-chat-"+d[s].id).prop("checked")){e.values.push({key:d[s].id,text:"1"});e.text+="1"}if($("#gr-ift-cap-ticket-"+d[s].id).prop("checked")){m.values.push({key:d[s].id,text:"1"});m.text+="1"}var l=$("#gr-ift-masked-chat-"+d[s].id).val();n.values.push({key:d[s].id,text:l});n.text+=l;var k=$("#gr-ift-masked-ticket-"+d[s].id).val();p.values.push({key:d[s].id,text:k});p.text+=k}if($("#gr-tickets-out-client").prop("checked")){h.teo="CLIENT"}else{h.teo=$("#gr-tickets-out-mb").val()}h.tei=[];$(".ticket-in-mb-input").each(function(){if($(this).prop("checked")){h.tei.push({id:$(this).data("in-mb-id"),innerText:""})}});h.thue=$("#gr-ticket-in-action").val();var b={key:"ti_assign",text:"",values:[]};var q=this.operators.getOperatorList("id","",true);for(s=0;s<q.length;s++){if($.inArray(h.id,q[s].groups)!=-1&&$("#gr-ticket-auto-assign").prop("checked")){b.values.push({key:q[s].id,text:$("#gr-taa-"+q[s].id).val()});b.text+=$("#gr-taa-"+q[s].id).val()}}for(s=0;s<h.f.length;s++){switch(h.f[s].key){case"ti_assign":h.f[s]=lzm_commonTools.clone(b);break;case"ci_hidden":h.f[s]=lzm_commonTools.clone(u);break;case"ci_mandatory":h.f[s]=lzm_commonTools.clone(c);break;case"ci_cap":h.f[s]=lzm_commonTools.clone(e);break;case"ci_masked":h.f[s]=lzm_commonTools.clone(n);break;case"ti_hidden":h.f[s]=lzm_commonTools.clone(o);break;case"ti_mandatory":h.f[s]=lzm_commonTools.clone(a);break;case"ti_cap":h.f[s]=lzm_commonTools.clone(m);break;case"ti_masked":h.f[s]=lzm_commonTools.clone(p);break;case"c_prio":h.f[s]=lzm_commonTools.clone(g);break}}h.autoSendChatWelcome=($("#tae-auto-send-wel").prop("checked"))?"1":"0";h.chatWelcomeIsEditable=($("#tae-wel-edit").prop("checked"))?"1":"0";this.validateConfigForm("group",h)};AdminUserManagementClass.prototype.removeUserOrGroup=function(c){var e=this,g="";var d=function(){};var h=true;if(e.selectedListTab=="user"){d=function(){lzm_pollServer.pollSave("user~remove",b);e.operators.removeOperator(c);e.selectedUser=""};var b=e.operators.getOperator(c);if(b!=null&&b.level==1){g=t("The Administrator Account cannot be removed.");lzm_commonDialog.createAlertDialog(g,[{id:"ok",name:t("Ok")}],false,false,true);$("#alert-btn-ok").click(function(){lzm_commonDialog.removeAlertDialog()})}else{if(b!=null){d()}}}else{d=function(){lzm_pollServer.pollSave("group~remove",f);e.groups.removeGroup(c,true);e.selectedGroup=""};var f=e.groups.getGroup(c);var a=e.operators.getOperatorList("","",true);for(i=0;i<a.length;i++){if($.inArray(c,a[i].groups)!=-1){h=false}}if(!h){g=t("The group you try to delete contains one or more operators. Move all operators to another group and try again.");lzm_commonDialog.createAlertDialog(g,[{id:"ok",name:t("Ok")}],false,false,true);$("#alert-btn-ok").click(function(){lzm_commonDialog.removeAlertDialog()})}else{if(f!=null){d()}}}e.createListView(e.selectedUser,e.selectedGroup,e.selectedListTab)};AdminUserManagementClass.prototype.validateConfigForm=function(m,n){var k=this,g=0,f=0,c=true,d=false,b="",h=true;var e=function(){};if(m=="group"){e=function(){lzm_pollServer.pollSave("group~save",n);k.loadedGroup=null;window.parent.closeOperatorGroupConfiguration()};var o=k.groups.getGroup(n.id);if(o==null&&n.id==""){b=t("Please enter a group id.");c=false}else{if(k.selectedGroup==""&&o!=null){b=t("A group with this id does already exist. Please enter another group id.");c=false}else{if(o==null&&n.id.indexOf("?")!=-1){b=tid("invalid_id");c=false}else{if(n.email.indexOf("@")==-1){b=t("Please enter a valid email address.");c=false}else{if(Object.keys(n.humanReadableDescription).length==0){b=t("Please create at least one title for this group.");c=false}}}}}}else{if(m=="user"){e=function(){lzm_pollServer.pollSave("user~save",n);k.loadedUser=null;window.parent.closeOperatorGroupConfiguration()};var a=k.operators.getOperator(n.id);if(a==null&&n.userid==""){b=t("Please enter a valid username.");c=false}else{if(k.selectedUser==""&&a!=null){b=t("An operator with this id does already exist. Please enter another username.");c=false}else{if(n.name==""){b=t("Please enter the full name.");c=false}else{if(n.ldap==0&&n.passwd.length<6){b=t("Your password is weak or very weak, we highly recommend to use a strong alphanumeric password.")+"\r\n"+tid("password_info")+"\r\n"+t("Do you want to set a strong password?");d=true}else{if(n.passwd!=n.passwd_repeat){b=t("Password and password repetition do not match.");c=false}}}}}}else{if(m=="bot"){e=function(){lzm_pollServer.pollSave("bot~save",n);k.loadedUser=null;window.parent.closeOperatorGroupConfiguration()};var l=k.operators.getOperator(n.id);if(n.name==""){b=t("Please enter the full name.");c=false}else{if(k.selectedUser==""&&l!=null){b=t("An operator with this id does already exist. Please enter another username.");c=false}}}}}var p=function(){if(k.selectedListTab=="user"&&k.editType!="bot"){lzm_userManagement.operators.copyOperator(n);var s=(k.loadedUser!=null)?lzm_commonTools.clone(k.loadedUser):lzm_commonTools.clone(k.newUser);var r=(k.selectedUser!="")?k.selectedUser:n.id;if(typeof s.sig!="undefined"){n=k.operators.setOperatorProperty(r,"sig",s.sig)}if(typeof s.pm!="undefined"){n=k.operators.setOperatorProperty(r,"pm",s.pm)}}else{if(k.selectedListTab=="user"&&k.editType=="bot"){lzm_userManagement.operators.copyOperator(n)}else{if(k.selectedListTab!="user"){lzm_userManagement.groups.copyGroup(n);var u=(k.loadedGroup!=null)?lzm_commonTools.clone(k.loadedGroup):lzm_commonTools.clone(k.newGroup);var q=(k.selectedGroup!="")?k.selectedGroup:n.id;if(typeof u.sig!="undefined"){n=k.groups.setGroupProperty(q,"sig",u.sig)}if(typeof u.pm!="undefined"){n=k.groups.setGroupProperty(q,"pm",u.pm)}if(typeof u.ohs!="undefined"){n=k.groups.setGroupProperty(q,"ohs",u.ohs)}if(typeof u.humanReadableDescription!="undefined"){n=k.groups.setGroupProperty(q,"humanReadableDescription",u.humanReadableDescription)}if(typeof u.name!="undefined"){n=k.groups.setGroupProperty(q,"name",u.name)}}}}};if(!c){lzm_commonDialog.createAlertDialog(b,[{id:"ok",name:t("Ok")}],false,false,true);$("#alert-btn-ok").click(function(){lzm_commonDialog.removeAlertDialog()})}else{if(d){lzm_commonDialog.createAlertDialog(b,[{id:"yes",name:t("Yes")},{id:"no",name:t("No")}],false,false,true);$("#alert-btn-yes").click(function(){lzm_commonDialog.removeAlertDialog()});$("#alert-btn-no").click(function(){p();e();lzm_commonDialog.removeAlertDialog()})}else{p();e()}}};AdminUserManagementClass.prototype.createAccountConfiguration=function(f,n){var l=this;var p=(f!=null&&f.userid!="")?f.userid:(n=="bot")?md5(Math.random().toString()).substr(0,8).toUpperCase():"";var g=((f!=null&&typeof f.is_copy=="undefined")||n=="bot")?" ui-disabled":"";var o=(f!=null)?f.name:"";var a=(f!=null)?f.email:"";var h=(f!=null)?f.desc:"";var e=(f!=null)?f.ldap:0;var b=(f!=null)?f.lang:l.defaultLanguage;var r=(((f!=null&&f.isbot==1)||n=="bot")&&false)?" ui-disabled":"";var c=(f!=null&&f.cponl=="1")?' checked="checked"':"";var q=[],s=Object.keys(l.availableLanguages);for(i=0;i<s.length;i++){q.push({value:s[i],text:s[i].toUpperCase()+" - "+l.availableLanguages[s[i]]})}var k=(f!=null&&!f.is_active)?' checked="checked"':"";var m='<fieldset id="op-account-details" class="lzm-fieldset"><legend>'+t("User Details")+"</legend>";m+=lzm_inputControls.createInput("operator-uid","umg-edit-text-input"+g,p,t("Username (ID)"),'<i class="fa fa-barcode"></i>',"text","a");m+=lzm_inputControls.createInput("operator-fn","umg-edit-text-input",o,t("Full Name"),'<i class="fa fa-user"></i>',"text","a");m+=lzm_inputControls.createInput("operator-em","umg-edit-text-input",a,t("Email"),'<i class="fa fa-envelope-o"></i>',"text","a");m+=lzm_inputControls.createInput("operator-desc","umg-edit-text-input",h,t("Description"),'<i class="fa fa-info"></i>',"text","a");m+='<div><label for="operator-lng">'+t("Native Language")+"</label></div>"+lzm_inputControls.createSelect("operator-lng","umg-edit-select"+r,"",true,{position:"right",gap:"0px"},{},"",q,b.toLowerCase(),"");m+='<div style="margin-top: 10px;"><input type="checkbox" class="checkbox-custom" id="operator-inactive"'+k+' /><label for="operator-inactive" class="checkbox-custom-label">'+t("Deactivate account")+"</label></div>";m+="</fieldset>";if(n!="bot"){m+='<fieldset id="op-account-auth" class="lzm-fieldset top-space"><legend>'+tid("auth")+"</legend>"+lzm_inputControls.createSelect("operator-auth","umg-edit-select","",true,{},{},"",[{text:tid("standard"),value:0},{text:"LDAP",value:1}],e,"")+"</fieldset>"}if((f!=null&&f.isbot!=1)||n!="bot"){var d=(f!=null)?f.pass:"";m+='<fieldset id="op-account-password" class="lzm-fieldset top-space"><legend>'+tid("password")+"</legend>"+lzm_inputControls.createInput("operator-pwd","umg-edit-text-input",d,t("Password"),'<i class="fa fa-lock"></i>',"password","a")+lzm_inputControls.createInput("operator-repeat-pwd","umg-edit-text-input",d,t("Repeat"),'<i class="fa fa-lock"></i>',"password","a")+"<div><input"+c+' type="checkbox" id="operator-force-pwd-change" class="checkbox-custom" /><label for="operator-force-pwd-change" class="checkbox-custom-label">'+t("User has to change his password on next logon")+"</label></div></fieldset>"}return m};AdminUserManagementClass.prototype.createGroupsConfiguration=function(a,k){var g=this;var e=g.groups.getGroupList("name",true,false),f=0;var l=[],o=Object.keys(g.availableLanguages);for(f=0;f<o.length;f++){l.push({value:o[f],text:o[f].toUpperCase()+" - "+g.availableLanguages[o[f]]})}var d=(a!=null)?a.groups:[];var c=(a!=null)?a.groupsHidden:[];var h='<div id="op-account-groups" style="padding-top: 1px;"><table class="visitor-list-table alternating-rows-table" style="width: 100%;"><thead><tr><th class="icon-column"></th><th>'+t("Group")+'</th><th style="width:140px;text-align:center;">'+t("Member")+'</th><th style="width:140px;text-align:center;">'+t("Hidden")+"</th></tr></thead><tbody>";for(f=0;f<e.length;f++){var n=($.inArray(e[f].id,d)!=-1)?' checked="checked"':"";var b=($.inArray(e[f].id,c)!=-1)?' checked="checked"':"";var m=lz_global_base64_url_encode(e[f].id);h+='<tr><td style="text-align:center;"><i class="fa fa-users"></i></td><td>'+e[f].name+'</td><td style="width:140px;text-align:center;"><input type="checkbox" class="checkbox-custom" id="group-member-'+m+'"'+n+' /><label for="group-member-'+m+'" class="checkbox-custom-label"></label></td><td style="width:140px;text-align:center;"><input type="checkbox" class="checkbox-custom" id="group-hidden-'+m+'"'+b+' /><label for="group-hidden-'+m+'" class="checkbox-custom-label"></td></tr>'}h+="</tbody></table>";h+="</div>";return h};AdminUserManagementClass.prototype.createPictureConfiguration=function(b,c){var f=(this.permissions.picture_change=="1")?' checked="checked"':"";var a=(b!=null&&typeof b.pp!="undefined")?b.pp:"DEFAULT";a=(a.indexOf("data")==0||a=="DEFAULT")?a:"data:image/png;base64,"+a;var e=(a!="")?'<div><img id="operator-pic-img" alt="Embedded Image" src="" style="border: 1px solid #ccc; padding: 5px; background: #ffffff;" /><br /><canvas id="operator-pic-canvas" width="80" height="60" style="position: absolute; top: -1000px; left: -1000px;"></canvas> </div>':"";var d=c?"none":"block";var g='<fieldset class="lzm-fieldset op-config-fs" id="op-picture-configuration"><legend>'+t("Picture")+"</legend>"+e+'<div class="top-space bottom-space">'+lzm_inputControls.createInput("operator-pic","umg-edit-text-input","",t("From file"),'<i class="fa fa-file-o"></i>',"file","a")+'<input type="hidden" value="'+a+'" id="operator-pic-b64" /><div class="lzm-info-text top-space-half">'+t("Aspect ratio 4:3")+'</div></div></fieldset><fieldset class="lzm-fieldset" style="display:'+d+'"><legend>'+t("Permissions")+'</legend><input type="checkbox" class="checkbox-custom" id="operator-allowed-change-pic"'+f+' /><label for="operator-allowed-change-pic" class="checkbox-custom-label">'+t("Operator is allowed to change his picture")+"</label></fieldset>";return g};AdminUserManagementClass.prototype.createBotModeConfiguration=function(b){var d=(b!=null&&b.wm==1)?' checked="checked"':"";var c=(b!=null&&b.wm==0)?" ui-disabled":"";var a=(b!=null&&b.wm==1)?" ui-disabled":"";var f=(b==null||b.wm==0)?' checked="checked"':"";var e=[{value:"0",text:t("Always")},{value:"1",text:t("After first question")},{value:"2",text:t("After second question")},{value:"3",text:t("After third question")},{value:"4",text:t("After fourth question")},{value:"5",text:t("After fifth question")}];var h=(b!=null)?b.wmohca:-1;var g='<fieldset class="lzm-fieldset op-config-fs" id="op-bot-mode-configuration"><legend>'+t("Bot Mode")+'</legend><input type="radio" name="bot-mode-radio" class="radio-custom bot-mode-radio" id="operator-bot-mode-wmm"'+d+' /><label for="operator-bot-mode-wmm" class="radio-custom-label radio-custom-label-parent">'+t("Welcome Manager Mode")+'</label><div id="wmm-subconfig" class="top-space left-space-child '+c+'"><div id="wmm-explanation">'+t("When Welcome Manager Mode is activated, this bot will receive all chats targeting one of his groups first.")+"<br />"+t("However, he can offer to forward to a human operator or to leave a message.")+'</div><div class="top-space"><label for="wmm-fwd-after">'+t("Bot offers to forward to a human operator...")+"</label></div>"+lzm_inputControls.createSelect("wmm-fwd-after","umg-edit-select","",true,{position:"right",gap:"0px"},{},"",e,h,"")+'</div><div class="top-space-double"><input type="radio" name="bot-mode-radio" class="radio-custom bot-mode-radio" id="operator-bot-mode-om"'+f+' /><label for="operator-bot-mode-om" class="radio-custom-label radio-custom-label-parent">'+t("Offline Mode")+'</label></div><div id="om-explanation" class="top-space left-space-child '+a+'">'+t("In Offline Mode this bot will only receive chats, when all human operators are offline or away.")+"<br />"+t("Chats with this bot will be interrupted instantly, when a human operator comes online.")+"</div></fieldset>";return g};AdminUserManagementClass.prototype.createOperatorChatsConfiguration=function(c){var b=(c!=null&&c.mc!=-1)?' checked="checked"':"";var e=(c!=null&&c.mc!=-1)?'class="top-space left-space-child"':' class="ui-disabled top-space left-space-child"';var d=(c!=null)?parseInt(c.mc):-1,a=0;if(isNaN(d)||d<=0){d=2}else{if(d>9){a=1;d=d%10}}var f=[{value:0,text:t('Held in queue (similar to operator status "Busy")')},{value:1,text:t('Rejected (similar to operator status "Away")')}];var g='<fieldset class="lzm-fieldset op-config-fs" id="op-chats-configuration"><legend>'+t("Chats")+'</legend><div><input type="checkbox" class="checkbox-custom" id="operator-limit-chats"'+b+' /><label for="operator-limit-chats" class="checkbox-custom-label">'+t("Limit Concurrent Chat Amount")+'</label></div><div id="op-limit-chats-subconfig"'+e+">"+lzm_inputControls.createInput("operator-chat-number","umg-edit-text-input",d,t("Maximum number of concurrent chats"),"","number","")+'<div class="top-space"><label for="wmm-fwd-after">'+t("Incoming chats exceeding this limitation will be...")+"</label></div>"+lzm_inputControls.createSelect("op-limit-action","umg-edit-select","",true,{position:"right",gap:"0px"},{},"",f,a,"")+"</div></div></fieldset>";return g};AdminUserManagementClass.prototype.createOperatorSecurityConfiguration=function(a){var b=(a!=null)?a.lipr:"";var c='<fieldset class="lzm-fieldset op-config-fs" id="op-security-configuration"><legend>'+t("IP Address Range for Logins")+"</legend>"+t("If specified, only computers with an IP address within the given IP range are allowed to login.")+"<p>"+t("WARNING: Use with care. It's possible to lock out yourself easily.")+"</p><p>"+t("Possible formats:")+'</p><table style="border:0;max-width:400px;"><tr><td>1.</td><td>'+t("Single IP:")+"</td><td>1.2.3.4</td></tr><tr><td>2.</td><td>"+t("Wildcard:")+"</td><td>1.2.3.*</td></tr><tr><td>3.</td><td>"+t("Start-End IP:")+"</td><td>1.2.3.0-1.2.3.255</td></tr><tr><td>4.</td><td>"+t("Deactivated:")+"</td><td>"+t("Blank")+"</td></tr></table><p>"+t("You can combine multiple expressions using the comma separator.")+"</p>"+lzm_inputControls.createInput("operator-ip-range","umg-edit-text-input",b,t("IP or IP-Range (blank = deactivated)"),"","text","")+"</fieldset>";return c};AdminUserManagementClass.prototype.createOperatorMobileAccountConfiguration=function(a){var f=this;var e=(a!=null&&a.mobileAccount)?' checked="checked"':"";var g=(a!=null&&a.mobileAccount)?"":" ui-disabled";var h='<fieldset class="lzm-fieldset op-config-fs" id="op-mobile-account-configuration"><legend>'+t("Mobile Account")+'</legend><div><input type="checkbox"  class="checkbox-custom" id="operator-account-is-mobile"'+e+' /><label for="operator-account-is-mobile" class="checkbox-custom-label">'+t("This is a mobile account")+'</label></div><div class="left-space-child bottom-space top-space">'+t("This account only receives chats, when the operators/accounts selected below are signed off (status offline).")+"<br />"+t("This allows operators to be connected from different devices (mobile and desktop) concurrently without having to manage their connections manually when leaving the office.")+'</div><div class="left-space-child top-space'+g+'" id="mobile-account-subconfig"><table class="alternating-rows-table"><tbody>';var b=f.operators.getOperatorList();for(var d=0;d<b.length;d++){if(b[d].isbot!=1&&(a==null||a.id!=b[d].id)){var c=(a!=null)?a.mobileAlternatives:[];var k=($.inArray(b[d].id,c)!=-1)?' checked="checked"':"";h+='<tr><td style="width: 30px !important;text-align:center;"><input type="checkbox" class="checkbox-custom" class="op-pref-account" data-op-id="'+b[d].id+'" id="op-pref-account-'+b[d].id+'"'+k+' /><label class="checkbox-custom-label" for="op-pref-account-'+b[d].id+'"></td><td>'+b[d].name+" ("+b[d].userid+")</td></tr>"}}h+="</tbody></table></div></fieldset>";return h};AdminUserManagementClass.prototype.createOperatorPermissionsConfiguration=function(a,g){var e=this;var f='<div class="op-config-fs" id="op-permissions-configuration"><div id="permissions-placeholder"></div></div>';var d=[{id:"general",name:t("General"),perms:[{id:"mobile_access",setting:e.permissions.mobile_access},{id:"api_access",setting:e.permissions.api_access}]},{id:"chats",name:t("Chats"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.chats,options:g.chats.general},{id:"create-filter",type:"checkbox",setting:e.permissions.chats_create_filter,text:t("Operator is allowed to create filters (ban users)"),level:1},{id:"take-over",type:"checkbox",setting:e.permissions.chats_take_over,text:t("Operator is allowed to take chats"),level:1},{id:"change-priority",type:"checkbox",setting:e.permissions.chats_change_priority,text:t("Operator is allowed to change chat priority"),level:1},{id:"change-target-operator",type:"checkbox",setting:e.permissions.chats_change_target_operator,text:t("Operator is allowed to change target operator"),level:1},{id:"change-target-group",type:"checkbox",setting:e.permissions.chats_change_target_group,text:t("Operator is allowed to change target group"),level:1},{id:"send-invites",type:"checkbox",setting:e.permissions.chats_send_invites,text:t("Operator is allowed to send chat invitations"),level:1},{id:"start-new",type:"checkbox",setting:e.permissions.chats_start_new,text:t("Operator is allowed to start chats with website visitors"),level:1},{id:"delete-text",type:"checkbox",setting:e.permissions.chats_delete_text,text:t("Operator is allowed to clear text of chat"),level:1},{id:"forward",type:"checkbox",setting:e.permissions.chats_forward,text:t("Operator is allowed to forward chats"),level:1},{id:"can-reject",type:"checkbox",setting:e.permissions.chats_can_reject,text:t("Operator is allowed to decline chats"),level:1},{id:"join",type:"checkbox",setting:e.permissions.chats_join,text:t("Operator is allowed to join chats..."),level:1},{id:"join-invisible",type:"checkbox",setting:e.permissions.chats_join_invisible,text:t("...invisibly"),level:2},{id:"join-after-invitation",type:"checkbox",setting:e.permissions.chats_join_after_invitation,text:t("...when invited"),level:2},{id:"cancel-invites",type:"checkbox",setting:e.permissions.chats_cancel_invites,text:t("Operator is allowed to cancel chat invitations"),level:1},{id:"cancel-invites-others",type:"checkbox",setting:e.permissions.chats_cancel_invites_others,text:t("Operator is allowed to cancel chat invitations sent by others"),level:2},{id:"can-auto-accept",type:"checkbox",setting:e.permissions.chats_can_auto_accept,text:t("Operator is allowed to auto accept chats"),level:1},{id:"must-auto-accept",type:"checkbox",setting:e.permissions.chats_must_auto_accept,text:t("Operator must auto accept chats"),level:2}]},{id:"tickets",name:t("Tickets"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.tickets,options:g.tickets.general},{id:"change-signature",type:"checkbox",setting:e.permissions.tickets_change_signature,text:t("Operator can change his signature"),level:1},{id:"review-emails",type:"checkbox",setting:e.permissions.tickets_review_emails,text:t("Operator can review emails"),level:1},{id:"delete-emails",type:"checkbox",setting:e.permissions.tickets_delete_emails,text:t("Operator can delete emails"),level:2},{id:"create-new",type:"checkbox",setting:e.permissions.tickets_create_new,text:t("Operator can create new Tickets"),level:1},{id:"change-status",type:"checkbox",setting:e.permissions.tickets_change_status,text:t("Operator can change ticket status"),level:1},{id:"status-open",type:"checkbox",setting:e.permissions.tickets_status_open,text:t("Open"),level:2},{id:"status-progress",type:"checkbox",setting:e.permissions.tickets_status_progress,text:t("In Progress"),level:2},{id:"status-closed",type:"checkbox",setting:e.permissions.tickets_status_closed,text:t("Closed"),level:2},{id:"status-deleted",type:"checkbox",setting:e.permissions.tickets_status_deleted,text:t("Deleted"),level:2},{id:"assign-operator",type:"checkbox",setting:e.permissions.tickets_assign_operators,text:t("Operator can assign Tickets to Operators"),level:1},{id:"assign-group",type:"checkbox",setting:e.permissions.tickets_assign_groups,text:t("Operator can assign Tickets to Groups"),level:1},{id:"delete-ticket",type:"checkbox",setting:e.permissions.tickets_delete_ticket,text:t("Operator can delete Tickets from Server"),level:1},{id:"edit-messages",type:"checkbox",setting:e.permissions.tickets_edit_messages,text:t("Operator can edit message values / fields"),level:1}]},{id:"ratings",name:t("Ratings"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.ratings,options:g.ratings.general}]},{id:"profiles",name:t("Profiles"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.profiles,options:g.profiles.general}]},{id:"resources",name:tid("knowledgebase"),perms:[{id:"general-read",text:tid("visibility"),type:"select",setting:e.permissions.resources_read,options:g.resourcesrw.general},{id:"general-write",text:tid("modify"),type:"select",setting:e.permissions.resources_write,options:g.resourcesrw.general}]},{id:"events",name:t("Events"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.events,options:g.events.general}]},{id:"reports",name:t("Reports"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.reports,options:g.reports.general}]},{id:"archives",name:t("Archives"),perms:[{id:"external",text:t("External Chat Archives (Visitors / Customers)"),type:"select",setting:e.permissions.archives_external,options:g.archives.external},{id:"internal",text:t("Internal Chat Archives (Operators / Groups)"),type:"select",setting:e.permissions.archives_internal,options:g.archives.internal}]},{id:"monitoring",name:t("Monitoring"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.monitoring,options:g.monitoring.general}]},{id:"groups",name:t("(Dynamic) Groups"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.groups_dynamic,options:g.groups.general}]},{id:"replies",name:t("Auto Replies"),perms:[{id:"general",text:t("General permissions"),type:"select",setting:e.permissions.auto_replies,options:g.replies.general}]},{id:"files",name:t("Files"),perms:null}];var c=[];for(var b in d){if(d.hasOwnProperty(b)){c.push(e.createPermissionTab(d[b],a))}}return{html:f,tabs:c}};AdminUserManagementClass.prototype.createPermissionTab=function(m,a){var k=this,c={name:m.name,content:""};if(m.id=="general"){c.content=k.createGeneralPermissionTab(a,m.perms)}else{if(m.id=="files"){c.content=k.createFilesPermissionTab(a,m.perms)}else{c.content='<fieldset class="lzm-fieldset perm-inner-fs" id="permtab-'+m.id+'-inner"><legend>'+m.name+"</legend>";if(m.perms!=null){var f=true;for(var h=0;h<m.perms.length;h++){if(m.perms[h].type=="select"){var b=m.perms[h].options[0].text;for(var g=0;g<m.perms[h].options.length;g++){if(m.perms[h].options[g].value==m.perms[h].setting){b=m.perms[h].options[g].text}}if(h==0){c.content+="<div>"}else{c.content+='<div class="top-space">'}c.content+='<label for="permtab-'+m.id+"-select-"+m.perms[h].id+'">'+m.perms[h].text+"</label></div>"+lzm_inputControls.createSelect("permtab-"+m.id+"-select-"+m.perms[h].id,"","",b,{position:"right",gap:"0px"},{"margin-bottom":"20px"},"",m.perms[h].options,m.perms[h].setting,"")}else{if(m.perms[h].type=="checkbox"){var d=(m.perms[h].setting==1)?' checked="checked"':"";if(m.perms[h].setting==1&&m.perms[h].level==1){f=true}else{if(m.perms[h].setting==0&&m.perms[h].level==1){f=false}}var e=(m.perms[h].level==1)?"0px":"20px";var l=(m.perms[h].level==2&&!f)?' class="ui-disabled"':"";c.content+="<div"+l+' style="margin: 10px 0px 10px '+e+';"><input type="checkbox" class="checkbox-custom" id="permtab-'+m.id+"-checkbox-"+m.perms[h].id+'"'+d+' /><label for="permtab-'+m.id+"-checkbox-"+m.perms[h].id+'" class="checkbox-custom-label" id="permtab-'+m.id+"-checkbox-"+m.perms[h].id+'">'+m.perms[h].text+"</label></div>"}}}}c.content+="</fieldset>"}}return c};AdminUserManagementClass.prototype.createGeneralPermissionTab=function(c,e){var f="",h="";for(var d=0;d<e.length;d++){if(e[d].id=="mobile_access"&&e[d].setting==1){f=' checked="checked"'}if(e[d].id=="api_access"&&e[d].setting==1){h=' checked="checked"'}}var b=(c==null||c.userid==lzm_pollServer.loginData.login)?' class="ui-disabled"':"";var a=(c!=null&&c.level==1)?' checked="checked"':"";var g='<fieldset class="lzm-fieldset" id="permtab-general-inner-general" style="height: 110px;"><legend>'+t("General")+'</legend><div><input type="checkbox" class="checkbox-custom" id="permtab-general-use-mobile"'+f+' /><label for="permtab-general-use-mobile" class="checkbox-custom-label">'+t("This user is allowed to sign on using the mobile APP or web based client")+'</label></div><div style="margin:10px 0 0 0;"><input type="checkbox" class="checkbox-custom" id="permtab-general-use-api"'+h+' /><label for="permtab-general-use-api" class="checkbox-custom-label">'+t("This user is allowed to make API calls")+'</label></div></fieldset><fieldset class="lzm-fieldset" id="permtab-general-inner-admin" style="margin-top: 10px;"><legend>'+t("Administrator")+"</legend><div"+b+' style="margin: 10px 0px;"><input type="checkbox" class="checkbox-custom" id="permtab-general-is-server-admin"'+a+' /><label for="permtab-general-is-server-admin" class="checkbox-custom-label">'+t("This user is Server Administrator")+"</label></div></fieldset>";return g};AdminUserManagementClass.prototype.createFilesPermissionTab=function(a){var d=(a==null||a.websp!=0)?' checked="checked"':"";var c=(a!=null)?a.websp:5;var b='<fieldset class="lzm-fieldset perm-inner-fs" id="permtab-files-inner"><legend>'+t("Files")+'</legend><div><input type="checkbox" class="checkbox-custom" id="permtab-files-can-upload"'+d+' /><label for="permtab-files-can-upload" class="checkbox-custom-label">'+t("Operator is allowed to upload files")+'</label></div><div class="top-space left-space-child">'+lzm_inputControls.createInput("permtab-files-size","",c,t("Webspace max (MB)"),"","number","")+"</div></fieldset>";return b};AdminUserManagementClass.prototype.createSignatureConfiguration=function(c){var d='<fieldset class="lzm-fieldset op-config-fs" id="op-signatures-configuration"><legend>'+t("Signatures")+'</legend><div id="signature-list-div"><table style="width: 100%;" class="visitor-list-table alternating-rows-table" id="signature-list-table"><tbody>';if(c!=null&&typeof c.sig!="undefined"){for(var a=0;a<c.sig.length;a++){if(typeof c.sig[a].deleted=="undefined"||!c.sig[a].deleted){var b=(c.sig[a].d==0)?c.sig[a].n:c.sig[a].n+" "+t("(Default)");d+='<tr id="signature-list-line-'+a+'" class="signature-list-line lzm-unselectable" onclick="selectSignature('+a+');" ondblclick="editSignature('+a+');"><td>'+b+"</td></tr>"}}}d+='</tbody></table></div><div style="margin-top: 15px; margin-bottom: 5px; text-align: right;">';d+=lzm_inputControls.createButton("new-signature-btn","","createSignature()",t("New"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Create new signature"),20,"b");d+=lzm_inputControls.createButton("edit-signature-btn","ui-disabled sig-edit-btns","editSignature()",t("Edit"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Edit selected signature"),20,"b");d+=lzm_inputControls.createButton("rm-signature-btn","ui-disabled sig-edit-btns","removeSignature()",t("Remove"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Remove selected signature"),20,"b");d+=lzm_inputControls.createButton("def-signature-btn","ui-disabled sig-edit-btns","setSignatureAsDefault()",t("Set as default"),"","lr",{"padding-left":"12px","padding-right":"12px"},t("Set selected signature as default"),20,"b");d+="</div></fieldset>";return d};AdminUserManagementClass.prototype.createSignatureInput=function(b){var e=(b!=null)?b.n:"";var c=(b!=null)?b.text:"";var a=(b!=null&&b.d==1)?' checked="checked"':"";var d='<div id="signature-inner-div"><fieldset class="lzm-fieldset input-fs" id="signature-inner-fs"><legend>'+t("Signature")+"</legend>"+lzm_inputControls.createInput("signature-name","",e,t("Name"),"","text","")+'<label for="signature-text" class="top-space">'+t("Signature")+'</label><textarea id="signature-text" onclick="removeSignaturePlaceholderMenu();" oncontextmenu="showSignaturePlaceholderMenu(event);">'+c+'</textarea><div style="margin-top:10px"><input type="checkbox" class="checkbox-custom" id="signature-as-default"'+a+' /><label for="signature-as-default" class="checkbox-custom-label">'+t("Default Signature")+'</label></div><span class="lzm-info-field"><i class="fa fa-info-circle icon-blue icon-large"></i><span>&nbsp;&nbsp;'+t("Please right click on a text field to add a placeholder")+"</span></span></fieldset></div>";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="signature";$(".umg-views").css({display:"none"});$("#umg-input-view").css({display:"block"});$("#umg-input-view").html(d);lzm_layout.resizeSignatureInput()};AdminUserManagementClass.prototype.saveSignature=function(){var e=this,c=[],b=null,f=null,a={},d=0;if(this.selectedListTab=="user"){b=lzm_commonTools.clone(e.loadedUser);b=(b!=null)?b:e.newUser;c=(b!=null&&typeof b.sig!="undefined")?b.sig:[];a=(b!=null&&typeof b.sig!="undefined"&&this.selectedSignatureNo!=-1)?b.sig[this.selectedSignatureNo]:{i:"",g:"",o:this.selectedUser}}else{f=lzm_commonTools.clone(e.loadedGroup);f=(f!=null)?f:e.newGroup;c=(f!=null&&typeof f.sig!="undefined")?f.sig:[];a=(f!=null&&typeof f.sig!="undefined"&&this.selectedSignatureNo!=-1)?f.sig[this.selectedSignatureNo]:{i:"",g:this.selectedGroup,o:""}}a.n=$("#signature-name").val();a.text=$("#signature-text").val();a.d=($("#signature-as-default").prop("checked"))?"1":"0";if(a.i!=""){for(d=0;d<c.length;d++){if(c[d].i==a.i){c[d]=a}else{if(a.d==1){c[d].d="0"}}}}else{for(d=0;d<c.length;d++){if(a.d==1){c[d].d="0"}}a.i=md5(Math.random().toString());c.push(a)}lzm_userManagement.selectedSignatureNo=-1;if(this.selectedListTab=="user"){if(e.selectedUser!=""){e.loadedUser.sig=lzm_commonTools.clone(c);b=lzm_commonTools.clone(e.loadedUser)}else{e.newUser.sig=lzm_commonTools.clone(c);b=lzm_commonTools.clone(e.newUser)}$(".umg-edit-placeholder-content").each(function(){if($(this).data("hash")=="signatures"){$(this).html(e.createSignatureConfiguration(b))}})}else{if(e.selectedGroup!=""){e.loadedGroup.sig=lzm_commonTools.clone(c);f=lzm_commonTools.clone(e.loadedGroup)}else{e.newGroup.sig=lzm_commonTools.clone(c);f=lzm_commonTools.clone(e.newGroup)}$(".umg-edit-placeholder-content").each(function(){if($(this).data("hash")=="signatures"){$(this).html(e.createSignatureConfiguration(f))}})}};AdminUserManagementClass.prototype.createTextAndEmailsConfiguration=function(e){var d=' checked="checked"';var f=' checked="checked"';var b="";var g='<fieldset class="lzm-fieldset op-config-fs" id="op-text-emails-configuration"><legend>'+t("Text and Emails")+'</legend><div id="text-emails-list-div"><table class="visitor-list-table alternating-rows-table" id="text-emails-list-table"><tbody>';e=(e!=null)?e:(this.selectedListTab!="user")?this.newGroup:this.newUser;if(e!=null&&typeof e.pm!="undefined"){for(var a=0;a<e.pm.length;a++){if(typeof e.pm[a].deleted=="undefined"||!e.pm[a].deleted){var c=e.pm[a].lang+" - "+this.availableLanguages[e.pm[a].lang.toLowerCase()];if(e.pm[a].def==1){c+=" ("+t("Default")+")"}g+='<tr id="text-emails-list-line-'+a+'" class="text-emails-list-line lzm-unselectable" onclick="selectTextEmails('+a+');" ondblclick="editTextEmails('+a+');"><td>'+c+"</td></tr>";if(e.pm[a].aw!="1"){d="";b=' ui-disabled"'}if(e.pm[a].edit!="1"){f=""}}}}g+='</tbody></table></div><div style="margin-top: 15px; margin-bottom: 5px; text-align: right;">';g+=lzm_inputControls.createButton("new-text-emails-btn","","createTextEmails()",t("New"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Create new texts"),20,"b");g+=lzm_inputControls.createButton("edit-text-emails-btn","ui-disabled text-emails-edit-btns","editTextEmails()",t("Edit"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Edit selected texts"),20,"b");g+=lzm_inputControls.createButton("rm-text-emails-btn","ui-disabled text-emails-edit-btns","removeTextEmails()",t("Remove"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Remove selected texts"),20,"b");g+=lzm_inputControls.createButton("def-text-emails-btn","ui-disabled text-emails-edit-btns","setTextEmailsAsDefault()",t("Set as default"),"","lr",{"padding-left":"12px","padding-right":"12px"},t("Set selected texts as default"),20,"b");g+='</div></fieldset><fieldset class="lzm-fieldset op-config-fs" id="op-text-emails-configuration"><legend>'+t("Chats")+'</legend><input type="checkbox" class="checkbox-custom" id="tae-auto-send-wel"'+d+' /><label for="tae-auto-send-wel" class="checkbox-custom-label" id="tae-auto-send-wel">'+t("Auto send Chat Welcome Message")+'</label><div class="left-space-child'+b+' top-space-half"><input type="checkbox" class="checkbox-custom" id="tae-wel-edit"'+f+' /><label for="tae-wel-edit" class="checkbox-custom-label" id="tae-wel-edit">'+t("Chat Welcome Message is editable")+"</label></div></fieldset>";return g};AdminUserManagementClass.prototype.createTextEmailsInput=function(y,l,o){var g=this,a=Object.keys(this.availableLanguages);var b=(y!=null)?"ui-disabled":"";var c=(y!=null)?y.lang:a[0].toUpperCase();var x=c+" - "+this.availableLanguages[c.toLowerCase()];var m=[],h=[];for(var s=0;s<a.length;s++){var e=(g.selectedListTab=="user")?(g.selectedUser!="")?lzm_commonTools.clone(g.loadedUser):lzm_commonTools.clone(g.newUser):(g.selectedGroup!="")?lzm_commonTools.clone(g.loadedGroup):lzm_commonTools.clone(g.newGroup);if(e!=null&&typeof e.pm!="undefined"){for(var r=0;r<e.pm.length;r++){if(typeof e.pm[r].deleted=="undefined"||!e.pm[r].deleted){h.push(e.pm[r].lang.toLowerCase())}}}if($.inArray(a[s],h)==-1||y!=null){m.push({value:a[s],text:a[s].toUpperCase()+" - "+this.availableLanguages[a[s]]})}}var k='<div id="text-emails-inner-div" data-aw="'+l+'" data-edit="'+o+'"><fieldset class="lzm-fieldset input-fs" id="text-emails-inner-lang-fs"><legend>'+t("Language")+"</legend>"+lzm_inputControls.createSelect("text-emails-lang-select",b,"",x,{position:"right",gap:"0px"},{},"",m,c.toLowerCase(),"")+'</fieldset><div id="text-emails-edit-placeholder"></div><span class="lzm-info-field"><i class="fa fa-info-circle icon-blue icon-large"></i><span>&nbsp;&nbsp;'+t("Please right click on a text field to add a placeholder")+"</span></span></div>";var p='<div id="text-emails-inner-text-placeholder"></div></fieldset>';var w=[{name:t("Text"),content:p}];var q=[g.createTextEmailsTab("text~welcome",y),g.createTextEmailsTab("text~invite",y),g.createTextEmailsTab("text~push",y)];var v=[];if(this.selectedListTab=="group"){var f='<div id="text-emails-inner-emails-placeholder"></div></fieldset>';w.push({name:t("Emails"),content:f});q.push(g.createTextEmailsTab("text~callback",y));q.push(g.createTextEmailsTab("text~queue",y));q.push(g.createTextEmailsTab("text~ticket",y));v.push(g.createTextEmailsTab("email-transcript",y));v.push(g.createTextEmailsTab("email-autoresponder",y));v.push(g.createTextEmailsTab("email-operator-reply",y))}window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="text";$(".umg-views").css({display:"none"});$("#umg-input-view").css({display:"block"});$("#umg-input-view").html(k);lzm_inputControls.createTabControl("text-emails-edit-placeholder",w,0,0);lzm_inputControls.createTabControl("text-emails-inner-text-placeholder",q,0,$(window).width()-58);if(this.selectedListTab=="group"){lzm_inputControls.createTabControl("text-emails-inner-emails-placeholder",v,0,$(window).width()-58);var d=[{name:t("Plaintext"),content:g.createEmailInnerTabContent(y,"ect")},{name:t("HTML"),content:g.createEmailInnerTabContent(y,"hct")}];var n=[{name:t("Plaintext"),content:g.createEmailInnerTabContent(y,"et")},{name:t("HTML"),content:g.createEmailInnerTabContent(y,"ht")}];var u=[{name:t("Plaintext"),content:g.createEmailInnerTabContent(y,"etr")},{name:t("HTML"),content:g.createEmailInnerTabContent(y,"htr")}];lzm_inputControls.createTabControl("tae-inner-tab-email-cte-tabs-placeholder",d,0,$(window).width()-100);lzm_inputControls.createTabControl("tae-inner-tab-email-tae-tabs-placeholder",n,0,$(window).width()-100);lzm_inputControls.createTabControl("tae-inner-tab-email-tore-tabs-placeholder",u,0,$(window).width()-100)}lzm_inputControls.createSelectChangeHandler("text-emails-lang-select",m);$("#tae-inner-tab-email-sct").click(function(){removeTextEmailsPlaceholderMenu()});$("#tae-inner-tab-email-sct").on("contextmenu",function(z){showTextEmailsPlaceholderMenu(z,"tae-inner-tab-email","sct")});$("#tae-inner-tab-email-st").click(function(){removeTextEmailsPlaceholderMenu()});$("#tae-inner-tab-email-st").on("contextmenu",function(z){showTextEmailsPlaceholderMenu(z,"tae-inner-tab-email","st")});$("#tae-inner-tab-email-str").click(function(){removeTextEmailsPlaceholderMenu()});$("#tae-inner-tab-email-str").on("contextmenu",function(z){showTextEmailsPlaceholderMenu(z,"tae-inner-tab-email","str")});lzm_layout.resizeTextEmailsInput()};AdminUserManagementClass.prototype.createTextEmailsTab=function(a,d){var f=this,g="",c="";var h=t("(leave blank to show standard text)");var k=t("(leave blank for none)");var e=t("(HTML enabled)");var b=t("(HTML disabled)");switch(a){case"text~welcome":g=t("Chat Welcome Message");c=f.createTextEmailsTabContent([{type:"textarea",size:"a",id:"text-wel",label:t("Welcome Message for Chats <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:"",value:"wel"},{type:"textarea",size:"a",id:"text-welcmb",label:t("Welcome Message for Instant Callback Chats <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:"",value:"welcmb"}],d);break;case"text~invite":g=t("Chat Invitation");c=f.createTextEmailsTabContent([{type:"textarea",size:"a",id:"text-invm",label:t("Manual Chat Invite Text <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:"",value:"invm"},{type:"textarea",size:"a",id:"text-inva",label:t("Auto (event) Chat Invite Text <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:"",value:"inva"}],d);break;case"text~push":g=t("Website Push");c=f.createTextEmailsTabContent([{type:"textarea",size:"a",id:"text-wpm",label:t("Manual Website Push Text <!--html_disabled-->",[["<!--html_disabled-->",b]]),info:"",value:"wpm"},{type:"textarea",size:"a",id:"text-wpa",label:t("Auto (event) Website Push Text <!--html_disabled-->",[["<!--html_disabled-->",b]]),info:"",value:"wpa"}],d);break;case"text~callback":g=t("Chat / Callback Information");c=f.createTextEmailsTabContent([{type:"textarea",size:"b",id:"text-ci",label:t("Chat Information <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:t("This text will be displayed to the visitor above the chat login form <!--blank_for_standard-->",[["<!--blank_for_standard-->",h]]),value:"ci"},{type:"textarea",size:"b",id:"text-ccmbi",label:t("Instant Callback Information <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:t("This text will be displayed to the visitor above the instant callback form <!--blank_for_standard-->",[["<!--blank_for_standard-->",h]]),value:"ccmbi"}],d);break;case"text~queue":g=t("Queue Message");c=f.createTextEmailsTabContent([{type:"textarea",size:"c",id:"text-qm",label:t("Queue waiting message <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:t("Display this text in queued chats <!--blank_for_none-->",[["<!--blank_for_none-->",k]]),value:"qm"},{type:"number",size:"c",id:"text-qmt",label:t("Display message after (in seconds)"),info:"",value:"qmt"}],d);break;case"text~ticket":g=t("Ticket Information");c=f.createTextEmailsTabContent([{type:"textarea",size:"d",id:"text-ti",label:t("Ticket Information <!--html_enabled-->",[["<!--html_enabled-->",e]]),info:t("This message will be displayed to the visitor above the leave message form <!--blank_for_standard-->",[["<!--blank_for_standard-->",h]]),value:"ti"}],d);break;case"email-transcript":g=t("Chat Transcript Email");c=f.createTextEmailsTabContent([{type:"text",size:"e",id:"email-sct",label:t("Subject"),info:"",value:"sct"},{type:"tabs",id:"email-cte-tabs",margin:"5px"}],d);break;case"email-autoresponder":g=t("Ticket Autoresponder Email");c=f.createTextEmailsTabContent([{type:"text",size:"e",id:"email-st",label:t("Subject"),info:"",value:"st"},{type:"tabs",id:"email-tae-tabs",margin:"5px"}],d);break;case"email-operator-reply":g=t("Ticket Operator Reply Email");c=f.createTextEmailsTabContent([{type:"text",size:"e",id:"email-str",label:t("Subject"),info:"",value:"str"},{type:"tabs",id:"email-tore-tabs",margin:"5px"}],d);break}return{name:g,content:'<fieldset class="lzm-fieldset text-emails-inner-tab-fs"><legend>'+g+"</legend>"+c+"</fieldset>"}};AdminUserManagementClass.prototype.createTextEmailsTabContent=function(d,b){var e=this,f="",g="",k="",h="",c=0;if(b==null){for(c=0;c<e.newPm.length;c++){if(e.newPm[c].lang.toLowerCase()=="en"){b=e.newPm[c]}}}for(c=0;c<d.length;c++){if(d[c].type=="textarea"){g='<label for="tae-inner-tab-'+d[c].id+'">'+d[c].label+"</label>";k=(b!=null)?b[d[c].value]:"";h=(d[c].info!="")?'<div style="margin:1px 0 4px 0;">'+d[c].info+"</div>":"";var a=(c>0)?' style="margin-top: 10px;"':"";f+="<div"+a+"><div>"+g+"</div>"+h+'<div><textarea id="tae-inner-tab-'+d[c].id+'" class="tae-inner-tab-textarea-'+d[c].size+'" onclick="removeTextEmailsPlaceholderMenu();" oncontextmenu="showTextEmailsPlaceholderMenu(event, \'tae-inner-tab\', \''+d[c].id+"');\">"+k+"</textarea></div></div>"}else{if(d[c].type=="number"){k=(b!=null)?b[d[c].value]:"";f+=lzm_inputControls.createInput("tae-inner-tab-"+d[c].id,"",k,d[c].label,"","number","a")}else{if(d[c].type=="text"){k=(b!=null)?b[d[c].value]:"";f+=lzm_inputControls.createInput("tae-inner-tab-"+d[c].id,"umg-edit-text-input",k,d[c].label,"","text","a")}else{if(d[c].type=="tabs"){f+='<div id="tae-inner-tab-'+d[c].id+'-placeholder" style="margin-top: '+d[c].margin+';"></div>'}}}}}return f};AdminUserManagementClass.prototype.createEmailInnerTabContent=function(c,b){var d=this,a=0;if(c==null){for(a=0;a<d.newPm.length;a++){if(d.newPm[a].lang.toLowerCase()=="en"){c=d.newPm[a]}}}var f=(c!=null)?c[b]:"";var e='<textarea id="tae-email-textarea-'+b+'" class="tae-email-textarea" onclick="removeTextEmailsPlaceholderMenu();" oncontextmenu="showTextEmailsPlaceholderMenu(event, \'tae-email-textarea\', \''+b+"');\">"+f+"</textarea>";return e};AdminUserManagementClass.prototype.saveText=function(){var f=this,g=[],b=null,h=null,k={},d=0;var e=function(n,o){var l=$("#tae-inner-tab-text-"+n).val();var q=$("#tae-inner-tab-email-"+n).val();var p=$("#tae-email-textarea-"+n).val();var m=(typeof l!="undefined")?l:(typeof p!="undefined")?p:(typeof q!="undefined")?q:(typeof o!="undefined")?o:"";return m};if(this.selectedListTab=="user"){b=lzm_commonTools.clone(f.loadedUser);b=(b!=null)?b:lzm_commonTools.clone(f.newUser);g=(b!=null&&typeof b.pm!="undefined")?b.pm:[];k=(b!=null&&this.selectedTextEmailsNo!=-1)?b.pm[this.selectedTextEmailsNo]:{}}else{h=lzm_commonTools.clone(f.loadedGroup);h=(h!=null)?h:lzm_commonTools.clone(f.newGroup);g=(h!=null&&typeof h.pm!="undefined")?h.pm:[];k=(h!=null&&this.selectedTextEmailsNo!=-1)?h.pm[this.selectedTextEmailsNo]:{}}k.lang=$("#text-emails-lang-select").val().toUpperCase();k.shortlang=k.lang.split("-")[0];var c=["et","etr","ect","ti","ci","st","str","sct","ccmbi","invm","inva","wel","welcmb","wpa","wpm","bi","def","aw","edit","qm","qmt","hct","ht","htr"];for(d=0;d<c.length;d++){k[c[d]]=e(c[d],k[c[d]])}k.aw=$("#text-emails-inner-div").data("aw");k.edit=$("#text-emails-inner-div").data("edit");var a=true;for(d=0;d<g.length;d++){if(g[d].lang==k.lang){g[d]=lzm_commonTools.clone(k);a=false}}if(a){g.push(lzm_commonTools.clone(k))}if(this.selectedListTab=="user"){if(f.selectedUser!=""){f.loadedUser.pm=lzm_commonTools.clone(g);b=lzm_commonTools.clone(f.loadedUser)}else{f.newUser.pm=lzm_commonTools.clone(g);b=lzm_commonTools.clone(f.newUser)}$(".umg-edit-placeholder-content").each(function(){if($(this).data("hash")=="text-and-emails"){$(this).html(f.createTextAndEmailsConfiguration(b))}})}else{if(f.selectedGroup!=""){f.loadedGroup.pm=lzm_commonTools.clone(g);h=lzm_commonTools.clone(f.loadedGroup)}else{f.newGroup.pm=lzm_commonTools.clone(g);h=lzm_commonTools.clone(f.newGroup)}$(".umg-edit-placeholder-content").each(function(){if($(this).data("hash")=="text-and-emails"){$(this).html(f.createTextAndEmailsConfiguration(h))}})}lzm_layout.resizeEditUserConfiguration()};AdminUserManagementClass.prototype.createGroupDetailsConfiguration=function(g){var c=(g!=null)?g.id:"";var a=(g!=null)?" ui-disabled":"";var f=(g!=null)?g.email:"";var b=(g!=null&&g.standard==1)?' checked="checked"':"";var d=(g==null||g.external==1)?' checked="checked"':"";var e=(g==null||g.internal==1)?' checked="checked"':"";var h='<fieldset class="lzm-fieldset"><legend>'+t("Group Details")+"</legend>"+lzm_inputControls.createInput("group-id","umg-edit-text-input"+a,c,t("Group-ID"),'<i class="fa fa-barcode"></i>',"text","a")+lzm_inputControls.createInput("group-email","umg-edit-text-input",f,t("Group-Email (visible to all users)"),'<i class="fa fa-envelope-o"></i>',"text","a")+'<div class="top-space"><input type="checkbox" class="checkbox-custom" id="group-is-default"'+b+' /><label for="group-is-default" class="checkbox-custom-label checkbox-custom-label-parent" id="group-is-default">'+t("Default Group")+'</label></div><div class="left-space-child">'+t("The default group will be pre-selected in the chat window. This can be overwritten by script / link preferences.")+'</div><div class="top-space"><input type="checkbox" class="checkbox-custom" id="group-interactions-visitors"'+d+' /><label for="group-interactions-visitors" class="checkbox-custom-label checkbox-custom-label-parent" id="group-interactions-visitors">'+t("Allow Interactions with Visitors / Customers")+'</label></div><div class="left-space-child">'+t("This group will be offered to your website visitors, when they start a chat. Operators of this group will receive external chats.")+'</div><div class="top-space"><input type="checkbox" class="checkbox-custom" id="group-interactions-operators"'+e+' /><label for="group-interactions-operators" class="checkbox-custom-label checkbox-custom-label-parent" id="group-interactions-operators">'+t("Allow Interactions with Operators / Groups")+'</label></div><div class="left-space-child">'+t("Operators of this group will see other operators and are allowed to chat among each other.")+'</div></fieldset><fieldset class="lzm-fieldset top-space-double"><legend>'+t("Titles (visible to all users)")+"</legend>"+t("Translate the title of your group into the most common languages.")+"<br />"+t("These titles will be shown to the operators and website visitors depending on their computer or browser localization settings.")+'<div id="group-title-div" class="top-space"><table class="visitor-list-table alternating-rows-table" id="group-title-table">';if(g!=null&&typeof g.humanReadableDescription!="undefined"){h+=this.createGroupTitleList(g.humanReadableDescription)}else{h+="<tbody></tbody>"}h+='</table></div><div style="margin-top: 15px; margin-bottom: 5px; text-align: right;">';h+=lzm_inputControls.createButton("new-title-btn","","createGroupTitle()",t("New"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Create new signature"),20,"b");h+=lzm_inputControls.createButton("edit-title-btn","ui-disabled title-edit-btns","editGroupTitle()",t("Edit"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Edit selected signature"),20,"b");h+=lzm_inputControls.createButton("rm-title-btn","ui-disabled title-edit-btns","removeGroupTitle()",t("Remove"),"","lr",{"padding-left":"12px","padding-right":"12px"},t("Remove selected signature"),20,"b");h+="</div></fieldset>";return h};AdminUserManagementClass.prototype.createGroupTitleList=function(c){var a="<tbody>";for(var b in c){if(c.hasOwnProperty(b)){a+='<tr id="group-title-line-'+b+'" class="group-title-line" onclick="selectGroupTitle(\''+b+"');\" ondblclick=\"editGroupTitle('"+b+"');\"><td>"+b.toUpperCase()+" - "+c[b]+"</td></tr>"}}a+="</tbody>";return a};AdminUserManagementClass.prototype.createGroupTitleInput=function(e,b){var f=this,m=Object.keys(f.availableLanguages),a=[];var g=b;b=(b!=""&&typeof f.availableLanguages[b]!="undefined")?b:(typeof f.availableLanguages[f.defaultLanguage]!="undefined")?f.defaultLanguage:m[0];for(var d=0;d<m.length;d++){if($.inArray(m[d],Object.keys(e))==-1||m[d]==g){a.push({value:m[d],text:m[d].toUpperCase()+" - "+f.availableLanguages[m[d]]})}}var k=(g!="")?"ui-disabled":"";var c=b.toUpperCase()+" - "+f.availableLanguages[b];var l=(typeof e[g]!="undefined")?e[g]:"";var h='<div id="group-title-inner-div"><fieldset class="lzm-fieldset input-fs" id="group-title-inner-fs"><legend>'+t("Group Title (visible to all users)")+'</legend><div style="margin-bottom: 10px;"><div style="margin: 0px 0px 4px 2px;"><label for="gr-title-lang">'+t("Language")+"</label></div><div>"+lzm_inputControls.createSelect("gr-title-lang",k,"",c,{position:"right",gap:"0px"},{},"",a,b,"")+"</div></div>"+lzm_inputControls.createInput("gr-title-text","umg-edit-text-input",l,t("Title"),"","text","")+"</fieldset></div>";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="title";$(".umg-views").css({display:"none"});$("#umg-input-view").css({display:"block"});$("#umg-input-view").html(h);lzm_inputControls.createSelectChangeHandler("gr-title-lang",a);lzm_layout.resizeGroupTitleInput()};AdminUserManagementClass.prototype.saveGroupTitle=function(){var a=this;var b=lzm_commonTools.clone(a.loadedGroup);b=(b!=null)?b:lzm_commonTools.clone(lzm_userManagement.newGroup);var d=lzm_commonTools.clone(b.humanReadableDescription);d[$("#gr-title-lang").val()]=$("#gr-title-text").val();var c=(typeof d[userLanguage]!="undefined")?d[userLanguage]:(typeof d[a.defaultLanguage]!="undefined")?d[a.defaultLanguage]:d[Object.keys(d)[0]];if(this.selectedGroup!=""){a.loadedGroup.humanReadableDescription=lzm_commonTools.clone(d);a.loadedGroup.name=c}else{this.newGroup.humanReadableDescription=lzm_commonTools.clone(d);this.newGroup.name=c}$("#group-title-table").html(this.createGroupTitleList(d))};AdminUserManagementClass.prototype.createGroupChatsConfiguration=function(h){var s=(h!=null&&h.mc!=-1)?' checked="checked"':"";var v=(h!=null&&h.mc!=-1)?"":"ui-disabled";var y=(h!=null&&h.mc!=-1)?h.mc:"2";var m=[{value:0,text:t('Held in queue (similar to operator status "Busy")')},{value:1,text:t('Rejected (similar to operator status "Away")')}];var n=y<10?0:1;y=y%10;var d=m[n];var g=[],p="";for(var w in lzm_pollServer.globalConfig.site[0].dbconf.glEmail){if(lzm_pollServer.globalConfig.site[0].dbconf.glEmail.hasOwnProperty(w)){var o=lzm_pollServer.globalConfig.site[0].dbconf.glEmail[w];if(o.t=="SMTP"||o.t=="PHPMail"){p=(p=="")?o.e:p;g.push({value:w,text:o.e})}}}var l=(h!=null)?h.ceo:(g.length>0)?g[0].value:"";var a=(typeof lzm_pollServer.globalConfig.site[0].dbconf.glEmail[l]!="undefined")?lzm_pollServer.globalConfig.site[0].dbconf.glEmail[l].e:p;var q=this.operators.getOperatorList("name","",true);var k=(h!=null)?h.id:"";var e=(h!=null&&h.ps==1)?' checked="checked"':"";var c='<fieldset class="lzm-fieldset"><legend>'+t("Concurrent Chat Amount")+'</legend><div style="margin: 1px 0px 10px 0px;"><input type="checkbox" class="checkbox-custom" id="gr-limit-chat-amount"'+s+' /><label for="gr-limit-chat-amount" class="checkbox-custom-label checkbox-custom-label-parent" id="gr-limit-chat-amount">'+t("Limit Concurrent Chat Amount")+'</label></div><div id="gr-limit-amount-inner" class="left-space-child '+v+'">'+lzm_inputControls.createInput("gr-limit-amount-to","umg-edit-text-input",y,t("Maximum number of concurrent chats per operator"),"","number","")+'<div class="bottom-space"><div class="top-space"><label for="gr-limit-action">'+t("Incoming chats exceeding this limitation will be...")+"</label></div><div>"+lzm_inputControls.createSelect("gr-limit-action","","",d,{position:"right",gap:"0px"},{},"",m,n,"")+'</div></div></div></fieldset><fieldset class="lzm-fieldset top-space"><legend>'+t("Chat Transcript Emails")+'</legend><div class="space-bottom"><div style="margin: 0px 0px 4px 2px;"><label for="gr-transcript-email">'+t("Chat Transcript Emails will be sent through this mailbox...")+"</label></div><div>"+lzm_inputControls.createSelect("gr-transcript-email","","",a,{position:"right",gap:"0px"},{},"",g,l,"")+'</div></div></fieldset><fieldset class="lzm-fieldset top-space"><legend>'+t("Operator Priority")+'</legend><div id="group-priorities-list-div"><table class="visitor-list-table alternating-rows-table"><thead><tr><th>'+tid("operator")+'</th><th style="width: 50px !important;">'+t("Priority (10 = highest)")+"</th></tr></thead><tbody>";var f=[],u=0;var x=(h!=null)?h.f:[];for(u=0;u<x.length;u++){if(x[u].key=="c_prio"){f=lzm_commonTools.clone(x[u].values)}}for(u=0;u<q.length;u++){if($.inArray(k,q[u].groups)!=-1&&q[u].isbot!=1){var b=1;for(var r=0;r<f.length;r++){if(f[r].key==q[u].id){b=parseInt(f[r].text)+1}}c+="<tr><td>"+q[u].userid+'</td><td style="text-align: right;">'+lzm_inputControls.createInput("op-prio-"+q[u].id,"operator-priority-input",b,"","","number","",'data-op-id="'+q[u].id+'"')+"</td></tr>"}}c+='</tbody></table></div><div style="margin: 10px 0px 0px 0px;"><input type="checkbox" class="checkbox-custom" id="gr-op-prio-active"'+e+' /><label for="gr-op-prio-active" class="checkbox-custom-label" id="gr-op-prio-active">'+t("Operators with a lower priority only receive chats, when all operators with a higher priority are offline")+"</label></div></fieldset>";return c};AdminUserManagementClass.prototype.createGroupInputFieldConfiguration=function(g){var b=(g!=null)?g.f:[];var f='<div id="gr-input-fields-placeholder"></div>';var e=function(y,o){var r='<table class="visitor-list-table alternating-rows-table" style="width: 100%;"><thead><tr><th>'+t("Input")+'</th><th style="width: 10px !important;">'+t("Hidden")+'</th><th style="width: 10px !important;">'+t("Required")+'</th><th style="width: 10px !important;">'+t("Capitalize")+'</th><th style="width: 10px !important;">'+t("Masked (for Operators)")+"</th></tr></thead><tbody>";var m=(y=="chat")?"ci_":"ti_";for(var v=0;v<o.length;v++){var q="",x="",w="",s=0;var l=[{value:"0",text:tid("none")},{value:"1",text:t("Completely (*********)")},{value:"2",text:t("Partly (P*a*n*e*t)")},{value:"3",text:t("Partly (*****text)")},{value:"4",text:t("Partly (Plain****)")}];var p=0;for(var u=0;u<b.length;u++){if(b[u].key==m+"hidden"){for(s=0;s<b[u].values.length;s++){if(b[u].values[s].text==o[v].id){q=' checked="checked"'}}}if(b[u].key==m+"mandatory"){for(s=0;s<b[u].values.length;s++){if(b[u].values[s].text==o[v].id){x=' checked="checked"'}}}if(b[u].key==m+"cap"){for(s=0;s<b[u].values.length;s++){if(b[u].values[s].key==o[v].id&&b[u].values[s].text==1){w=' checked="checked"'}}}if(b[u].key==m+"masked"){for(s=0;s<b[u].values.length;s++){if(b[u].values[s].key==o[v].id){p=parseInt(b[u].values[s].text)}}}}var n=l[p];r+="<tr><td>"+o[v].name+'</td><td style="text-align: center;"><input type="checkbox" class="checkbox-custom" id="gr-ift-hidden-'+y+"-"+o[v].id+'" data-input-id="'+o[v].id+'" style="vertical-align: middle;"'+q+' /><label for="gr-ift-hidden-'+y+"-"+o[v].id+'" class="checkbox-custom-label"></label></td><td style="text-align: center;"><input type="checkbox" class="checkbox-custom" id="gr-ift-mandatory-'+y+"-"+o[v].id+'" data-input-id="'+o[v].id+'" style="vertical-align: middle;"'+x+' /><label for="gr-ift-mandatory-'+y+"-"+o[v].id+'" class="checkbox-custom-label"></label></td><td style="text-align: center;"><input type="checkbox" class="checkbox-custom" id="gr-ift-cap-'+y+"-"+o[v].id+'" data-input-id="'+o[v].id+'" style="vertical-align: middle;"'+w+' /><label for="gr-ift-cap-'+y+"-"+o[v].id+'" class="checkbox-custom-label"></label></td><td style="text-align: center;">'+lzm_inputControls.createSelect("gr-ift-masked-"+y+"-"+o[v].id,"gr-input-field-select","",n,{position:"right",gap:"0px"},{},"",l,p,"",{"input-id":o[v].id})+"</td></tr>"}r+="</tbody></table>";return r};var a=this.inputList.getCustomInputList("full",true);var h=function(n,l){var m=0;if(parseInt(n.id)>=111&&parseInt(l.id)<111){m=-1}else{if(parseInt(n.id)<111&&parseInt(l.id)>=111){m=1}}return m};a.sort(h);var k='<fieldset class="lzm-fieldset" id="gr-input-fields-chat-fs"><legend>'+t("Chat / Callback Login Inputs")+'</legend><div id="input-fields-chat-list-div">'+e("chat",a)+"</div></fieldset>";var d='<fieldset class="lzm-fieldset" id="gr-input-fields-ticket-fs"><legend>'+t("Ticket Inputs")+'</legend><div id="input-fields-ticket-list-div">'+e("ticket",a)+"</div></fieldset>";var c=[{name:t("Chat"),content:k},{name:t("Ticket"),content:d}];return{html:f,tabs:c}};AdminUserManagementClass.prototype.createGroupTicketsConfiguration=function(n,y){y=(typeof y!="undefined")?y:0;var a='<div id="gr-tickets-placeholder"></div>';var x=[],A=[],F=0,K="";for(var G in lzm_pollServer.globalConfig.site[0].dbconf.glEmail){if(lzm_pollServer.globalConfig.site[0].dbconf.glEmail.hasOwnProperty(G)){var w=lzm_pollServer.globalConfig.site[0].dbconf.glEmail[G];if(w.t=="SMTP"||w.t=="PHPMail"){x.push({value:G,text:w.e});K=(K=="")?w.e:K}else{if(w.t=="POP"||w.t=="IMAP"){A.push({value:G,text:w.e})}}}}var u=(n!=null&&typeof n.teo!="undefined"&&n.teo!="CLIENT")?n.teo:(x.length>0)?x[0].value:"";var m=(typeof lzm_pollServer.globalConfig.site[0].dbconf.glEmail[u]!="undefined")?lzm_pollServer.globalConfig.site[0].dbconf.glEmail[u].e:K;var r=[{value:0,text:t("Raise new ticket automatically")},{value:1,text:t("Review manually")},{value:2,text:t("Ignore")}];var k=(n!=null)?parseInt(n.thue):1;var g=r[k].text;var D=[],h=[];var H=(n!=null)?n.f:[];for(F=0;F<H.length;F++){if(H[F].key=="c_smc"){D=lzm_commonTools.clone(H[F].values)}if(H[F].key=="ti_assign"){h=lzm_commonTools.clone(H[F].values)}}var v=[];var d=(n!=null)?n.tei:[];for(F=0;F<d.length;F++){v.push(d[F].id)}var z=this.operators.getOperatorList("name","",true);var o=(n!=null)?n.id:"";var J=[{value:0,text:t("No Assignment")},{value:1,text:t("<!--number-->%",[["<!--number-->","10"]])},{value:2,text:t("<!--number-->%",[["<!--number-->","20"]])},{value:3,text:t("<!--number-->%",[["<!--number-->","30"]])},{value:4,text:t("<!--number-->%",[["<!--number-->","40"]])},{value:5,text:t("<!--number-->%",[["<!--number-->","50"]])},{value:6,text:t("<!--number-->%",[["<!--number-->","60"]])},{value:7,text:t("<!--number-->%",[["<!--number-->","70"]])},{value:8,text:t("<!--number-->%",[["<!--number-->","80"]])},{value:9,text:t("<!--number-->%",[["<!--number-->","90"]])},{value:10,text:t("<!--number-->%",[["<!--number-->","100"]])}];var I=(n!=null&&n.teo=="CLIENT")?' checked="checked"':"";var E=(n==null||n.teo!="CLIENT")?' checked="checked"':"";var l='<fieldset class="lzm-fieldset" id="gr-tickets-email-out-fs"><legend>'+t("Outgoing Emails")+'</legend><div><input type="radio" name="gr-tickets-out-mta" class="gr-tickets-out-mta-radio radio-custom" id="gr-tickets-out-client"'+I+' /><label for="gr-tickets-out-client" class="radio-custom-label">'+t("Operators will send emails through the local email client (Outlook, Thunderbird etc)")+'</label></div><div class="top-space-half"><input type="radio" name="gr-tickets-out-mta" class="gr-tickets-out-mta-radio radio-custom" id="gr-tickets-out-lz"'+E+' /><label for="gr-tickets-out-lz" class="radio-custom-label">'+t("Operators will send emails through LiveZilla")+'</label></div><div class="left-space-child top-space-half">'+lzm_inputControls.createSelect("gr-tickets-out-mb","","",m,{position:"right",gap:"0px"},{},"",x,u,"")+'</div></fieldset><fieldset class="lzm-fieldset" id="gr-tickets-email-in-fs" style="margin-top: 10px;"><legend>'+t("Incoming Emails")+'</legend><label for="gr-ticket-in-action">'+t("Download / receive emails from:")+'</label><div id="gr-ticket-in-mb-div"><table class="visitor-list-table alternating-rows-table" style="width: 100%;"><tbody>';for(F=0;F<A.length;F++){var c=($.inArray(A[F].value,v)!=-1)?' checked="checked"':"";l+='<tr class="gr-ticket-in-mb-line" id="gr-ticket-in-mb-line-'+A[F].value+'"><td style="width: 1px !important;" class="icon-column"><input type="checkbox" id="ticket-in-mb-input'+F+'" class="ticket-in-mb-input checkbox-custom" data-in-mb-id="'+A[F].value+'" style="vertical-align: middle;"'+c+' /><label for="ticket-in-mb-input'+F+'" class="checkbox-custom-label"></label></td><td>'+A[F].text+"</td></tr>"}l+='</tbody></table></div><div class="bottom-space"><div class="top-space-double"><label for="gr-ticket-in-action">'+t("Emails that can't be assigned to an existing ticket will be handled like this...")+"</label></div><div>"+lzm_inputControls.createSelect("gr-ticket-in-action","","",g,{position:"right",gap:"0px"},{},"",r,k,"")+"</div></div></fieldset>";var B=this.createGroupTicketsSocialMediaTab(D);var b=(h.length>0)?' checked="checked"':"";var q=(h.length==0)?"ui-disabled":"";var p='<fieldset class="lzm-fieldset" id="gr-tickets-routing-fs"><legend>'+t("Assign Tickets")+'</legend><input type="checkbox" class="checkbox-custom" id="gr-ticket-auto-assign"'+b+' /><label for="gr-ticket-auto-assign" class="checkbox-custom-label">'+t("Auto assign new tickets to operators")+'</label><div id="gr-ticket-assign-list-div" style="margin: 10px 0px 0px 0px;" class="'+q+'"><table style="width: 100%;" class="visitor-list-table alternating-rows-table" id="gr-ticket-assign-list-table"><thead><th>'+tid("operator")+'</th><th style="width: 1px !important;">'+t("Balancing")+"</th></thead><tbody>";for(F=0;F<z.length;F++){if($.inArray(o,z[F].groups)!=-1){var e=0;for(var C=0;C<h.length;C++){if(h[C].key==z[F].id){e=parseInt(h[C].text)}}var s=J[e];p+='<tr id="gr-ticket-assign-list-line-'+z[F].id+'" class="gr-ticket-assign-list-line lzm-unselectable"><td>'+z[F].userid+"</td><td>"+lzm_inputControls.createSelect("gr-taa-"+z[F].id,"gr-ticket-assign-select","",s,{position:"right",gap:"0px"},{},"",J,e,"")+"</td></tr>"}}p+="</tbody></table></div></fieldset>";var f=[{name:t("Emails"),content:l},{name:t("Social Media"),content:B},{name:t("Routing"),content:p}];return{html:a,tabs:f}};AdminUserManagementClass.prototype.createGroupTicketsSocialMediaTab=function(a){var b='<fieldset class="lzm-fieldset" id="gr-tickets-social-fs"><legend>'+t("Social Media Channels")+'</legend><div id="gr-ticket-social-list-div"><table style="width: 100%;" class="visitor-list-table alternating-rows-table" id="gr-ticket-social-list-table"><tbody>';for(i=0;i<a.length;i++){b+='<tr id="social-media-list-line-'+i+'" class="social-media-list-line lzm-unselectable" onclick="selectSocialMedia('+i+');" ondblclick="editSocialMedia('+i+');"><td>'+a[i].n+"</td></tr>"}b+='</tbody></table></div><div style="margin-top: 15px; margin-bottom: 5px; text-align: right;">';b+=lzm_inputControls.createButton("edit-social-media-btn","ui-disabled smc-edit-btns","editSocialMedia()",t("Edit"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Edit selected Social Media Channel"),20,"b");b+=lzm_inputControls.createButton("rm-social-media-btn","ui-disabled smc-edit-btns","removeSocialMedia()",t("Remove"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},t("Remove selected Social Media Channel"),20,"b");b+="</div></fieldset>";return b};AdminUserManagementClass.prototype.createSocialMediaChannel=function(p){var e=this;var n=(p!=null)?"ui-disabled":"";var c=[{value:"0",text:t("Facebook")},{value:"1",text:t("Twitter")}];var r=(p!=null)?parseInt(p.t)-6:0;var q=(p!=null)?p.n:"";var d=(p!=null)?p.i:md5(Math.random().toString());var g=(p!=null)?p.p:"";var f=(p!=null&&p.t==7)?t("Twitter Account ID"):t("Facebook Page ID");var m=[{value:"0",text:t("Private Messages / Conversations")},{value:"1",text:t("Public Feeds and Comments")}];var k=(p!=null)?p.s:0;var s=(p!=null)?p.text:"";var b=(p!=null)?parseInt(p.c):15;var a=(p!=null&&typeof p.tr!="undefined"&&p.tr!="")?' checked="checked"':"";var o=(p!=null&&typeof p.tr!="undefined"&&p.tr!="")?"":"ui-disabled";var l=(p!=null&&typeof p.tr!="undefined")?p.tr:"";var h='<div id="social-media-inner-div"><fieldset class="lzm-fieldset input-fs" id="social-media-inner-fs"><legend>'+t("Social Media Channel")+'</legend><input type="hidden" id="smc-id" value="'+d+'" /><div style="margin-bottom: 10px;"><div><label for="smc-type">'+t("Language")+"</label></div><div>"+lzm_inputControls.createSelect("smc-type",n,"",c[r],{position:"right",gap:"0px"},{},"",c,r,"")+"</div></div>"+lzm_inputControls.createInput("smc-name","umg-edit-text-input",q,t("Name"),"","text","a")+lzm_inputControls.createInput("smc-account-id","umg-edit-text-input",g,f,"","text","a")+'<div style="margin-bottom: 10px;"><div><label for="smc-content-type">'+t("Language")+"</label></div><div>"+lzm_inputControls.createSelect("smc-content-type",n,"",m[k],{position:"right",gap:"0px"},{},"",m,k,"")+"</div></div>"+lzm_inputControls.createInput("smc-access-token","umg-edit-text-input ui-disabled",s,t("Access Token (required)"),"","text","a")+lzm_inputControls.createInput("smc-check-interval","",b,t("Check for new messages every... (minutes)"),"","number","a");if(p!=null&&p.t==7){h+='<fieldset class="lzm-fieldset"><legend>'+t("Tweets")+'</legend><div style="margin-top: 10px;" class="ui-disabled"><input type="checkbox" class="checkbox-custom" id="smc-use-me" checked="checked" /><label for="smc-use-me" class="checkbox-custom-label">'+t("Create tickets from every tweet mentioning me")+'</label></div><div style="margin-top: 10px;"><input type="checkbox" class="checkbox-custom" id="smc-use-track"'+a+' /><label for="smc-use-track" class="checkbox-custom-label">'+t("Create tickets from tweets containing one of these hashtags (comma separated)")+"</label></div>"+lzm_inputControls.createInput("smc-track",o,l,t("Hashtags"),"","text","a")+"</fieldset>"}h+="</fieldset>";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="smc";$(".umg-views").css({display:"none"});$("#umg-input-view").css({display:"block"});$("#umg-input-view").html(h);lzm_layout.resizeSocialMediaInput();$("#smc-check-interval").change(function(){var u=parseInt($("#smc-check-interval").val());if(isNaN(u)||u<15){u=15}else{if(u>65535){u=65535}}$("#smc-check-interval").val(u)});$("#smc-type").change(function(){$("#smc-type-inner-text").html($("#smc-type option:selected").text());if($("#smc-type").val()==0){$("#smc-account-id-label").html(t("Facebook Page ID"))}else{$("#smc-account-id-label").html(t("Twitter Account ID"))}});$("#smc-content-type").change(function(){$("#smc-content-type-inner-text").html($("#smc-content-type option:selected").text())})};AdminUserManagementClass.prototype.saveSocialMediaChannel=function(){var l=this;var e=$("#smc-id").val();var q=$("#smc-name").val();var n=$("#smc-account-id").val();var g=parseInt($("#smc-type").val())+6;var b=$("#smc-content-type").val();var s=$("#smc-access-token").val();var c=$("#smc-check-interval").val();var o=($("#smc-use-track").prop("checked"))?$("#smc-track").val():"";var p={i:e,n:q,t:g.toString(),s:b,p:n,text:s,c:c,d:"",tr:o};var r=lzm_commonTools.clone(l.loadedGroup);var k=(r!=null)?lzm_commonTools.clone(r.f):lzm_commonTools.clone(l.newGroup.f);for(var h=0;h<k.length;h++){if(k[h].key=="c_smc"){var d=true;var m="";for(var f=0;f<k[h].values.length;f++){if(k[h].values[f].i==e){m+=s;d=false;k[h].values[f]=p}else{m+=k[h].values[f].text}}if(d){k[h].values.push(p);m+=s}k[h].text=m;if(r!=null){l.loadedGroup.f=lzm_commonTools.clone(k);r=lzm_commonTools.clone(l.loadedGroup)}else{lzm_userManagement.newGroup.f=k;r=lzm_commonTools.clone(lzm_userManagement.newGroup)}}}var a=[];for(h=0;h<r.f.length;h++){if(r.f[h].key=="c_smc"){a=lzm_commonTools.clone(r.f[h].values)}}$("#gr-tickets-placeholder-content-1").html(lzm_userManagement.createGroupTicketsSocialMediaTab(a));lzm_layout.resizeEditUserConfiguration()};AdminUserManagementClass.prototype.createGroupHoursConfiguration=function(h){var f=this,k=(h!=null)?lzm_commonTools.clone(h.ohs):[];var c=function(o){var p=parseInt(o)%60;var n=(parseInt(o)-p)/60;var m=n%60;var l=(n-m)/60;return lzm_commonTools.pad(l,2)+":"+lzm_commonTools.pad(m,2)};k.sort(f.sortOhs);var g='<fieldset class="lzm-fieldset"><legend>'+t("Schedule (Opening Hours)")+"</legend><div>"+t("Operators of this group will not receive any chats outside of the chat opening times.")+" "+t("If no opening hours are specified, then chats are always possible.")+'</div><div id="gr-oh-list-div"><table class="visitor-list-table alternating-rows-table" style="width: 100%"><thead><tr><th style="text-align: center;">'+t("Monday")+'</th><th style="text-align: center;">'+t("Tuesday")+'</th><th style="text-align: center;">'+t("Wednesday")+'</th><th style="text-align: center;">'+t("Thursday")+'</th><th style="text-align: center;">'+t("Friday")+'</th><th style="text-align: center;">'+t("Saturday")+'</th><th style="text-align: center;">'+t("Sunday")+"</th></tr></thead><tbody>";for(var d=0;d<k.length;d++){var b='<tr class="gr-oh-list-line lzm-unselectable" id="gr-oh-list-line-'+d+'" onclick="selectOpeningHour('+d+');">';for(j=0;j<7;j++){if(parseInt(k[d].text)-1==j){var e=c(k[d].open);var a=c(k[d].close);b+='<td style="text-align: center; background: #FFFFE1;">'+e+" - "+a+"</td>"}else{b+="<td>&nbsp;</td>"}}b+="</tr>";g+=b}g+='</tbody></table></div><div style="margin-top: 15px; margin-bottom: 5px; text-align: right;">';g+=lzm_inputControls.createButton("new-group-oh-btn","","createOpeningHour()",t("Add Hours"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},"",20,"b");g+=lzm_inputControls.createButton("clear-group-oh-btn","","clearOpeningHours()",t("Clear Hours"),"","lr",{"margin-right":"5px","padding-left":"12px","padding-right":"12px"},"",20,"b");g+=lzm_inputControls.createButton("rm-group-oh-btn","ui-disabled oh-edit-btns","removeOpeningHour()",t("Remove"),"","lr",{"margin-right":"0px","padding-left":"12px","padding-right":"12px"},"",20,"b");g+="</div></fieldset>";return g};AdminUserManagementClass.prototype.sortOhs=function(f,c){var g=parseInt(f.text),e=parseInt(c.text);var k=parseInt(f.open),h=parseInt(c.open);var d=0;if(g>e){d=1}else{if(g<e){d=-1}else{if(k>h){d=1}else{if(k<h){d=-1}}}}return d};AdminUserManagementClass.prototype.createOpeningHours=function(c){var b=this;var d=[{value:"0",text:t("Monday")},{value:"1",text:t("Tuesday")},{value:"2",text:t("Wednesday")},{value:"3",text:t("Thursday")},{value:"4",text:t("Friday")},{value:"5",text:t("Saturday")},{value:"6",text:t("Sunday")}];var a='<div id="opening-hours-inner-div"><fieldset class="lzm-fieldset input-fs" id="opening-hours-inner-fs"><legend>'+t("Add Hours (24-hour clock)")+"</legend>"+lzm_inputControls.createSelect("oh-weekday","","",d[0].text,{position:"right",gap:"0px"},{},"",d,0,"")+'<table class="top-space"><tr><td style="text-align: left;">'+lzm_inputControls.createInput("oh-open","umg-edit-text-input oh-time","08:00",t("Open at (hh:mm)"),"","time","")+'</td><td>&nbsp;</td><td style="text-align: left;">'+lzm_inputControls.createInput("oh-close","umg-edit-text-input oh-time","17:00",t("Close at (hh:mm)"),"","time","")+"</td></tr></table></fieldset></div>";window.parent.lzm_chatDisplay.settingsDisplay.userManagementAction="oh";$(".umg-views").css({display:"none"});$("#umg-input-view").css({display:"block"});$("#umg-input-view").html(a);$(".oh-time").change(function(){var h=$(this).val();var g=false;if(h.indexOf(":")!=-1){var e=parseInt(h.split(":")[0]);var f=parseInt(h.split(":")[1]);if(!isNaN(e)&&e>=0&&e<=23&&!isNaN(f)&&f>=0&&f<=59){g=true}}if(!g){if($(this).attr("id")=="oh-open"){h="08:00"}else{h="17:00"}}$(this).val(h)});$("#oh-weekday").change(function(){$("#oh-weekday-inner-text").html($("#oh-weekday option:selected").text())});lzm_layout.resizeOpeningHoursInput()};AdminUserManagementClass.prototype.saveOpeningHours=function(){var d=this;var b=parseInt($("#oh-weekday").val())+1;var h=$("#oh-open").val();var f=$("#oh-close").val();var c=function(n){var l=0;var k=n.split(":")[0];var m=n.split(":")[1];l=parseInt(k)*3600+parseInt(m*60);return l};var e={text:b.toString(),open:c(h),close:c(f)};var g=lzm_commonTools.clone(d.loadedGroup),a=[];if(e.open<e.close){if(g!=null){a=lzm_commonTools.clone(g.ohs);a.push(e);a.sort(d.sortOhs);d.loadedGroup.ohs=lzm_commonTools.clone(a);g=lzm_commonTools.clone(d.loadedGroup)}else{a=lzm_commonTools.clone(d.newGroup.ohs);a.push(e);a.sort(d.sortOhs);d.newGroup.ohs=lzm_commonTools.clone(a);g=lzm_commonTools.clone(d.newGroup)}$(".umg-edit-placeholder-content").each(function(){if($(this).data("hash")=="opening-hours"){$(this).html(d.createGroupHoursConfiguration(g))}})}};AdminUserManagementClass.prototype.hideInputDialog=function(){$(".umg-views").css({display:"none"});$("#umg-edit-view").css({display:"block"});$("#umg-input-view").html("");lzm_layout.resizeAll()};AdminUserManagementClass.prototype.createEmptyUser=function(b){var a={perms:this.newOpPerms,pp:""};if(typeof b!="undefined"&&b=="bot"){a.pp=this.newBotPic}return a};AdminUserManagementClass.prototype.createEmptyGroup=function(){var h=this;var c="",d=[],g="",f=[];var a=h.inputList.getCustomInputList("full",true);for(var e=0;e<a.length;e++){c+="0";g+="0";d.push({text:"0",key:a[e].id});f.push({text:"0",key:a[e].id})}var b={ohs:[],f:[{text:"1",values:[],key:"gr_ex_sm"},{text:"1",values:[],key:"gr_ex_so"},{text:"1",values:[],key:"gr_ex_pr"},{text:"1",values:[],key:"gr_ex_ra"},{text:"0",values:[],key:"gr_ex_fv"},{text:"1",values:[],key:"gr_ex_fu"},{text:"",values:[],key:"ci_hidden"},{text:"",values:[],key:"ti_hidden"},{text:"",values:[],key:"ci_mandatory"},{text:"",values:[],key:"ti_mandatory"},{text:c,values:d,key:"ci_masked"},{text:g,values:f,key:"ti_masked"},{text:"",values:[],key:"ti_cap"},{text:"",values:[],key:"ci_cap"},{text:"",values:[],key:"ti_assign"},{text:"",values:[],key:"c_prio"},{text:"",values:[],key:"c_smc"}],humanReadableDescription:{},pm:h.newPm};return b};AdminUserManagementClass.prototype.showContextMenu=function(k,a,l,h,b){var g=this;b=(typeof b!="undefined")?b:"";var s=200,y=l+"px",x=h+"px",c=k;var z,w,B;$("#"+k+"-context").remove();var r='<div class="cm lzm-unselectable" id="'+c+'-context" onclick="handleContextMenuClick(event);">';if(k=="signature-inner-div"){r+=g.createSignatureContextMenuHtml()}else{if(k=="text-emails-inner-div"){r+=g.createTextAndEmailsContextMenuHtml(a.taIdPrefix,a.taId)}else{if(k!="new-btn"){r+=g.createContextMenuContent(k,a)}else{r+=g.createNewObjectMenu()}}}r+="</div>";var q="body";var u='<div id="context-menu-check-size-div" style="position:absolute; left: -1000px; top: -1000px; width: 800px; height: 800px;"></div>';$("body").append(u);$("#context-menu-check-size-div").html(r);var p=$(q).width();var d=$(q).height();var A=$("#"+c+"-context").width()+20;var v=Math.min(d-24,$("#"+c+"-context").height());if(d!=null&&p!=null){var n=d-h;var f=p-l;var m=f-A-12;var o=n-v-12;if(m<0){y=Math.max((l-A-12),5)+"px"}if(o<0){x=Math.max((h-v-12),5)+"px"}}$("#context-menu-check-size-div").remove();r=r.replace(/%CONTEXTX%/g,parseInt(y)).replace(/%CONTEXTY%/g,parseInt(x)).replace(/%MYWIDTH%/g,parseInt(A)).replace(/%MYHEIGHT%/g,parseInt(v));$(q).append(r);var e={left:y,width:A+"px",height:v+"px"};if(b=="ticket-message-actions"){e.bottom="30px"}else{if(b=="chat-actions"&&a.button=="actions"){e.bottom="77px"}else{e.top=x}}$("#"+c+"-context").css(e)};AdminUserManagementClass.prototype.createContextMenuContent=function(c,b){var d="",a="";d=(false)?' class="ui-disabled"':"";a+="<div"+d+' onclick="createListObject(null);"><i class="fa fa-plus"></i><span id="umg-ctxt-new" class="cm-line cm-line-icon-left cm-click">'+t("New")+"</span></div><hr />";d=(false)?' class="ui-disabled"':"";a+="<div"+d+" onclick=\"editListObject('"+b.id+'\', event);"><i class="fa fa-edit"></i><span id="umg-ctxt-edit" class="cm-line cm-line-icon-left cm-click">'+t("Edit")+"</span></div>";d=(false)?' class="ui-disabled"':"";a+="<div"+d+'><i class="fa fa-remove"></i><span id="umg-ctxt-rm" class="cm-line cm-line-icon-left cm-click" onclick="removeListObject(\''+b.id+"', event);\">"+t("Remove")+"</span></div>";if(this.selectedListTab=="user"){a+="<div"+d+'><span id="umg-ctxt-edit" class="cm-line cm-click" onclick="copyOperator(\''+b.id+"', event);\">"+t("Copy this operator")+"</span></div>";a+="<div"+d+'><span id="umg-ctxt-edit" class="cm-line cm-click" onclick="showSubMenu(\'user\', \''+b.id+"', %CONTEXTX%, %CONTEXTY%, %MYWIDTH%, %MYHEIGHT%)\">"+t("Copy permissions from")+'</span><i class="fa fa-chevron-right lzm-ctxt-right-fa"></i></div>'}return a};AdminUserManagementClass.prototype.showSubMenu=function(e,a,r,q,b,k){var d=this,o=0;var f=function(){var x='<div id="get-scrollbar-width-div" style="position: absolute; left: 0; top: -9999px;width: 100px; height:100px; overflow-y:scroll;"></div>';$("body").append(x).trigger("create");var w=$("#get-scrollbar-width-div");var v=w[0].offsetWidth-w[0].clientWidth;w.remove();return v};var h='<div class="cm lzm-unselectable" id="'+e+'-context" onclick="handleContextMenuClick(event);">';h+='<div style="margin: 0px 0px 4px 0px; text-align: left; white-space: nowrap;"><i class="fa fa-chevron-left lzm-ctxt-left-fa"></i><span id="show-super-menu" class="cm-line cm-line-icon-left cm-click" onclick="showSuperMenu(\''+e+"', "+r+", "+q+", "+b+", "+k+')">'+t("Back")+"</span></div><hr />";switch(e){case"user":var m=d.operators.getOperatorList("","",true);for(o=0;o<m.length;o++){if(m[o].id!=a){h+='<div><span id="umg-ctxt-edit" class="cm-line cm-click" style=\'margin-left: 5px;\' onclick="copyOpPermsFrom(\''+a+"', '"+m[o].id+"', event);\">"+m[o].name+"</span></div>"}}break}h+="</div>";var g="body";if(e!="body"&&e!="ticket-details"&&e!="visitor-list-table-div"){g="#"+e+"-body"}else{if(e!="body"){g="#"+e}}var l='<div id="context-menu-check-size-div" style="position:absolute; left: -3000px; top: -3000px; width: 2500px; height: 2500px;"></div>';$("body").append(l);var s=h.replace(/id="/g,'id="test-');$("#context-menu-check-size-div").html(s);var u=$("#test-"+e+"-context").width();var n=$("#test-"+e+"-context").height();u=(n>k)?b+f():b;n=Math.min(n,k);var p=(n>=k)?q:q+Math.round((k-n)/2);$("#context-menu-check-size-div").remove();this.storedSuperMenu=$("#"+e+"-context").html();$("#"+e+"-context").replaceWith(h);var c={left:r,width:u+"px",height:n+"px",top:p};$("#"+e+"-context").css(c)};AdminUserManagementClass.prototype.showSuperMenu=function(a,d,c,f,g){var b='<div class="cm lzm-unselectable" id="'+a+'-context" onclick="handleContextMenuClick(event);">'+this.storedSuperMenu+"</div>";$("#"+a+"-context").replaceWith(b);var e={left:d+"px",width:f+"px",height:g+"px",top:c+"px"};$("#"+a+"-context").css(e)};AdminUserManagementClass.prototype.createNewObjectMenu=function(){var a="";a+='<div onclick="createListObject(\'user\');"><i class="fa fa-user"></i><span id="umg-new-btn-op" class="cm-line cm-line-icon-left cm-click">'+tid("operator")+"</span></div>";a+='<div onclick="createListObject(\'bot\');"><span id="umg-new-btn-bot" class="cm-line cm-click">'+t("Chat Bot (Virtual Assistant)")+"</span></div><hr />";a+='<div onclick="createListObject(\'group\');"><i class="fa fa-users"></i><span id="umg-new-btn-gr" class="cm-line cm-line-icon-left cm-click">'+t("Group")+"</span></div>";return a};AdminUserManagementClass.prototype.createSignatureContextMenuHtml=function(){var a="";a+='<div class="ui-disabled"><span id="sig-add-placeholder" class="cm-line">'+t("Add Placeholder:")+"</span></div>";a+='<div onclick="addPlaceholder(\'signature\', \'%operator_name%\');"><span id="sig-add-op-name" class="cm-line cm-click">'+t("Operator Name")+"</span></div>";a+='<div onclick="addPlaceholder(\'signature\', \'%operator_id%\');"><span id="sig-add-op-id" class="cm-line cm-click">'+t("Operator Id")+"</span></div>";a+='<div onclick="addPlaceholder(\'signature\', \'%operator_email%\');"><span id="sig-add-op-email" class="cm-line cm-click">'+t("Operator Email")+"</span></div>";a+='<div onclick="addPlaceholder(\'signature\', \'%group_title%\');"><span id="sig-add-gr-title" class="cm-line cm-click">'+t("Group Title")+"</span></div>";a+='<div onclick="addPlaceholder(\'signature\', \'%group_id%\');"><span id="sig-add-gr-id" class="cm-line cm-click">'+t("Group Id")+"</span></div>";return a};AdminUserManagementClass.prototype.createTextAndEmailsContextMenuHtml=function(A,w){var B=function(aa){var X="";for(var Y=0;Y<aa.length;Y++){var Z=lzm_commonTools.clone(aa[Y]);X+='<div><span id="tae-add-'+Z.id+'" class="cm-line cm-click" style=\'margin-left: 5px; padding: 1px 15px 1px 20px; cursor:pointer;\' onclick="addPlaceholder(\''+A+"-"+w+"', '"+Z.pl+"');\">"+Z.text+"</span></div>"}return X};var D=["text-wel","text-welcmb","text-invm","text-wpm","text-qm","ect","hct","et","ht","etr","htr","sct","st","str"];var Q=["text-wel","text-welcmb","text-invm","text-wpm","etr","htr","str"];var q=["text-wel","text-welcmb"];var p=["text-wel","text-welcmb","text-invm","text-wpm","text-inva","text-wpa","text-qm","ect","hct","et","ht","etr","htr","sct","st","str"];var L=["text-wel","text-welcmb","ect","hct","sct"];var h=["ect","hct","et","ht"];var y=["text-invm","text-inva","et","ht"];var S=["text-wel","text-welcmb","text-invm","text-inva","text-wpm","text-wpa","text-qm","ect","hct","et","ht","etr","htr","sct","st","str"];var l=["text-wel","text-welcmb","text-invm","text-inva","text-wpm","text-wpa","text-qm"];var C=["text-wel","text-welcmb","text-invm","text-inva","text-wpm","text-wpa","text-qm"];var x=["text-wel","text-welcmb","ect","hct","sct"];var c=["text-wel","text-welcmb","text-invm","text-wpm","et","ht","etr","htr","st","str"];var K=["text-wpm","text-wpa"];var m=["et","ht","st"];var J=["et","ht","etr","htr","st","str"];var e=["et","ht","st","str"];var V=["etr","htr"];var z=["et","ht","etr","htr","st"];var a=["text-wel","text-welcmb","text-invm","text-wpm","text-qm","ect","hct","et","ht","sct","st","str"];var E=["ect","hct","et","ht","etr","htr"];var O=[{id:"op-name",pl:"%operator_name%",text:t("Operator Name")},{id:"op-id",pl:"%operator_id%",text:t("Operator Id")},{id:"op-email",pl:"%operator_email%",text:t("Operator Email")}];var u=[{id:"op-gr-id",pl:"%group_id%",text:t("Operator Group")},{id:"op-gr-desc",pl:"%group_description%",text:t("Operator Group Description")}];var W=[{id:"vis-lastname",pl:"%external_lastname%",text:t("Visitor Lastname")},{id:"vis-firstname",pl:"%external_firstname%",text:t("Visitor Firstname")}];var f=[{id:"vis-fullname",pl:"%external_name%",text:t("Visitor Fullname")},{id:"vis-email",pl:"%external_email%",text:t("Visitor Email")},{id:"vis-company",pl:"%external_company%",text:t("Visitor Company")},{id:"vis-phone",pl:"%external_phone%",text:t("Visitor Phone")},{id:"vis-ip",pl:"%external_ip%",text:t("Visitor IP")}];var v=[{id:"vis-question",pl:"%question%",text:t("Visitor Question")}];var n=[{id:"vis-details",pl:"%details%",text:t("Visitor Details")}];var T=[{id:"vis-country",pl:"%location_country%",text:t("Visitor Country <!--geo_tracking-->",[["<!--geo_tracking-->",t("(Geo Tracking)")]])},{id:"vis-country-iso",pl:"%location_country_iso%",text:t("Visitor Country ISO <!--geo_tracking-->",[["<!--geo_tracking-->",t("(Geo Tracking)")]])},{id:"vis-region",pl:"%location_region%",text:t("Visitor Region <!--geo_tracking-->",[["<!--geo_tracking-->",t("(Geo Tracking)")]])},{id:"vis-city",pl:"%location_city%",text:t("Visitor City <!--geo_tracking-->",[["<!--geo_tracking-->",t("(Geo Tracking)")]])}];var G=[{id:"ws-name",pl:"%website_name%",text:t("Website Name")}];var H=[{id:"ws-page-title",pl:"%page_title%",text:t("Website Page Title")},{id:"ws-page-url",pl:"%url%",text:t("Website Page URL")}];var M=[{id:"ws-search-query",pl:"%searchstring%",text:t("Search Query")}];var d=[{id:"ws-chat-id",pl:"%chat_id%",text:t("Chat ID")}];var k=[{id:"ws-time",pl:"%localtime%",text:t("Local Time")},{id:"ws-date",pl:"%localdate%",text:t("Local Date")}];var R=[{id:"ws-target-url",pl:"%target_url%",text:t("Target URL")}];var F=[{id:"ti-id",pl:"%ticket_id%",text:t("Ticket ID")}];var b=[{id:"ti-subject",pl:"%subject%",text:t("Ticket Subject / URL")}];var s=[{id:"ti-text",pl:"%mailtext%",text:t("Ticket Text")}];var g=[{id:"ti-quote",pl:"%quote%",text:t("Ticket Quote")}];var I=[{id:"ti-hash",pl:"%ticket_hash%",text:t("Ticket Hash")}];var P=[{id:"em-feedback",pl:"%feedback_link%",text:t("Feedback Link")}];var o=[];var r=this.inputList.getCustomInputList("custom",true);for(var N=0;N<r.length;N++){o.push({id:"cu-"+r[N].id,pl:"%custom"+r[N].id+"%",text:r[N].name})}var U="";U+='<div class="ui-disabled"><span id="sig-add-placeholder" class="cm-line">'+t("Add Placeholder:")+"</span></div>";if($.inArray(w,["text-ti","text-ci","text-ccmbi"])==-1){U+="<hr />"}if($.inArray(w,Q)!=-1){U+=B(O)}if($.inArray(w,D)!=-1){U+=B(u)}if($.inArray(w,D.concat(Q))!=-1){U+="<hr />"}if($.inArray(w,q)!=-1){U+=B(W)}if($.inArray(w,p)!=-1){U+=B(f)}if($.inArray(w,L)!=-1){U+=B(v)}if($.inArray(w,h)!=-1){U+=B(n)}if($.inArray(w,y)!=-1){U+=B(T)}if($.inArray(w,p)!=-1){U+="<hr />"}if($.inArray(w,S)!=-1){U+=B(G)}if($.inArray(w,l)!=-1){U+=B(H)}if($.inArray(w,C)!=-1){U+=B(M)}if($.inArray(w,x)!=-1){U+=B(d)}if($.inArray(w,c)!=-1){U+=B(k)}if($.inArray(w,K)!=-1){U+=B(R)}if($.inArray(w,m)!=-1){U+=B(F)}if($.inArray(w,J)!=-1){U+=B(b)}if($.inArray(w,e)!=-1){U+=B(s)}if($.inArray(w,V)!=-1){U+=B(g)}if($.inArray(w,z)!=-1){U+=B(I)}if($.inArray(w,E)!=-1){U+=B(P)}if($.inArray(w,a)!=-1&&o.length>0){U+="<hr />";U+=B(o)}return U};